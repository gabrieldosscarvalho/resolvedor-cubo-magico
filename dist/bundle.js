(()=>{"use strict";var e,i,t={712:(e,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Cube=void 0;var n=t(383),o=t(213),r=function(){function e(e){this.faces=[],this.initRandom(e)}return e.prototype.initRandom=function(e){var i=e*e,t=new o.FacetColorPicker(i);console.log("---initRandom",{size:e,cubeSize:i,colorPicker:t});for(var r=1;r<=6;r++)for(var c=0;c<i;c++)void 0===this.faces[r]&&(this.faces[r]=[]),this.faces[r][c]=new n.Facet(t.popRandomColor())},e.prototype.move=function(e){},e}();i.Cube=r},213:(e,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FacetColorPicker=i.FACET_COLORS=void 0;var n,o=t(569);!function(e){e.RED="#F44336",e.GREEN="#4CAF50",e.BLUE="#03A9F4",e.YELLOW="#FFEB3B",e.ORANGE="#FB8C00",e.GREY="#795548"}(n=i.FACET_COLORS||(i.FACET_COLORS={}));var r=Object.keys(n),c=function(){function e(e){this.size=e,this.colors=[];for(var i=0;i<r.length;i++)for(var t=0;t<e;t++)void 0===this.colors[i]&&(this.colors[i]=[]),this.colors[i][t]=n[r[i]]}return e.prototype.popRandomColor=function(){var e=(0,o.randomIntFromInterval)(0,r.length-1),i=(0,o.randomIntFromInterval)(0,this.colors.length-1);if(this.colors[e][i]){var t=this.colors[e][i];return delete this.colors[e][i],t}return this.popRandomColor()},e}();i.FacetColorPicker=c},383:(e,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Facet=void 0;i.Facet=function(e){this.color=e}},890:(e,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Pixel=void 0;i.Pixel=function(e){this.position=e.position,this.color=e.color,this.size=e.size}},569:(e,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.randomIntFromInterval=void 0,i.randomIntFromInterval=function(e,i){return Math.floor(Math.random()*(i-e+1)+e)}},281:function(e,i,t){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var i,t=1,n=arguments.length;t<n;t++)for(var o in i=arguments[t])Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,i,t){if(t||2===arguments.length)for(var n,o=0,r=i.length;o<r;o++)!n&&o in i||(n||(n=Array.prototype.slice.call(i,0,o)),n[o]=i[o]);return e.concat(n||Array.prototype.slice.call(i))};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;var r=t(890),c="#ccc",l=function(){function e(e){var i,t;this.canvasContext=e.canvasContext,this.canvasDOM=e.canvasDOM,this.cubeSize=e.cubeSize,this.width=null!==(i=null==e?void 0:e.width)&&void 0!==i?i:640,this.height=null!==(t=null==e?void 0:e.height)&&void 0!==t?t:480,this.pixels=new Map,this.cubePixels=new Map}return e.prototype.init=function(){this.initStyle(),this.initPixels()},e.prototype.initStyle=function(){this.canvasDOM.setAttribute("width","".concat(this.width,"px")),this.canvasDOM.setAttribute("height","".concat(this.height,"px")),this.canvasDOM.style.backgroundColor="#333"},e.prototype.initPixels=function(){for(var e=this.getPixelSize(),i=Math.ceil(this.height/e),t=Math.ceil(this.width/e),n=0;n<i;n++)for(var o=0;o<t;o++)this.updatePixel(new r.Pixel({position:{x:o,y:n},color:c,size:e}))},e.prototype.getPixelSize=function(){var e=Math.ceil(this.width/this.height),i=this.cubeSize*this.cubeSize*4/e,t=this.cubeSize*this.cubeSize*3/e,n=this.width/i-this.height/t;return Math.floor(n<=-1?this.width/i:this.height/t)},e.prototype.updatePixel=function(e){this.pixels.set("".concat(e.position.x,"-").concat(e.position.y),e),this.renderPixel(e)},e.prototype.renderPixel=function(e){var i=e.size*e.position.x,t=e.size*e.position.y;this.canvasContext.clearRect(i,t,e.size,e.size),this.canvasContext.lineWidth=2,this.canvasContext.strokeStyle=c,this.canvasContext.strokeRect(i,t,e.size,e.size),e.color!==c&&(this.canvasContext.fillStyle=e.color,this.canvasContext.fillRect(i+1,t+1,e.size-2,e.size-2))},e.prototype.renderCube=function(e){var i=this,t=o([],e.faces,!0);this.renderFace({lineInitialValue:this.cubeSize,lineIsValid:function(e){return e<2*i.cubeSize},columnInitialValue:0,columnIsValid:function(e){return e<i.cubeSize}},t[1]),this.renderFace({lineInitialValue:this.cubeSize,lineIsValid:function(e){return e<2*i.cubeSize},columnInitialValue:this.cubeSize,columnIsValid:function(e){return e<2*i.cubeSize}},t[2]),this.renderFace({lineInitialValue:this.cubeSize,lineIsValid:function(e){return e<2*i.cubeSize},columnInitialValue:2*this.cubeSize,columnIsValid:function(e){return e<3*i.cubeSize}},t[3]),this.renderFace({lineInitialValue:this.cubeSize,lineIsValid:function(e){return e<2*i.cubeSize},columnInitialValue:3*this.cubeSize,columnIsValid:function(e){return e<4*i.cubeSize}},t[4]),this.renderFace({lineInitialValue:0,lineIsValid:function(e){return e<i.cubeSize},columnInitialValue:this.cubeSize,columnIsValid:function(e){return e<2*i.cubeSize}},t[5]),this.renderFace({lineInitialValue:2*this.cubeSize,lineIsValid:function(e){return e<3*i.cubeSize},columnInitialValue:this.cubeSize,columnIsValid:function(e){return e<2*i.cubeSize}},t[6])},e.prototype.renderFace=function(e,i){for(var t=e.lineInitialValue,o=e.columnInitialValue,c=0;c<i.length;){for(;e.lineIsValid(t);){for(;e.columnIsValid(o);){var l=this.pixels.get("".concat(o,"-").concat(t));this.updatePixel(new r.Pixel(n(n({},l),{color:i[c].color}))),c++,o++}o=e.columnInitialValue,t++}t=e.lineInitialValue}},e}();i.Viewport=l}},n={};function o(e){var i=n[e];if(void 0!==i)return i.exports;var r=n[e]={exports:{}};return t[e].call(r.exports,r,r.exports,o),r.exports}e=o(712),i=o(281),document.addEventListener("DOMContentLoaded",(function(){var t=document.getElementById("main"),n=t.getContext("2d");if(null===n)throw new Error("Canvas nÃ£o encotrado");var o=new i.Viewport({canvasContext:n,canvasDOM:t,cubeSize:2}),r=new e.Cube(2);o.init(),console.log("--cube",{cube:r}),console.log("--viwport",{viwport:o}),o.renderCube(r)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVuZGxlLmpzIiwibWFwcGluZ3MiOiJ1QkFFQSxFQUNBLEUsZ0ZDVUEsYUFDQSxTQVdBLGFBS0UsV0FBWUEsR0FDVkMsS0FBS0MsTUFBUSxHQUViRCxLQUFLRSxXQUFXSCxFQUNsQixDQXVCRixPQXJCVSxZQUFBRyxXQUFSLFNBQW1CSCxHQUNqQixJQUFNSSxFQUFXSixFQUFPQSxFQUVsQkssRUFBYyxJQUFJLEVBQUFDLGlCQUFpQkYsR0FFekNHLFFBQVFDLElBQUksZ0JBQWlCLENBQUVSLEtBQUksRUFBRUksU0FBUSxFQUFFQyxZQUFXLElBRTFELElBQUssSUFBSUksRUFBWSxFQUFHQSxHQUFhLEVBQUdBLElBQ3RDLElBQUssSUFBSUMsRUFBYSxFQUFHQSxFQUFhTixFQUFVTSxTQUNoQkMsSUFBMUJWLEtBQUtDLE1BQU1PLEtBQ2JSLEtBQUtDLE1BQU1PLEdBQWEsSUFHMUJSLEtBQUtDLE1BQU1PLEdBQVdDLEdBQWMsSUFBSSxFQUFBRSxNQUN0Q1AsRUFBWVEsaUJBSXBCLEVBRUEsWUFBQUMsS0FBQSxTQUFLQyxHQUF5QixFQUNoQyxFQWhDQSxHQUFhLEVBQUFDLEtBQUFBLEMsMEdDekJiLElBRVlDLEVBRlosVUFFQSxTQUFZQSxHQUNWLGdCQUNBLGtCQUNBLGlCQUNBLG1CQUNBLG1CQUNBLGdCQUNELENBUEQsQ0FBWUEsRUFBQSxFQUFBQSxlQUFBLEVBQUFBLGFBQVksS0FTeEIsSUFBTUMsRUFBb0JDLE9BQU9DLEtBQUtILEdBSXRDLGFBR0UsV0FBcUJqQixHQUFBLEtBQUFBLEtBQUFBLEVBQ25CQyxLQUFLb0IsT0FBUyxHQUVkLElBQ0UsSUFBSUMsRUFBYSxFQUNqQkEsRUFBYUosRUFBa0JLLE9BQy9CRCxJQUVBLElBQUssSUFBSUUsRUFBUSxFQUFHQSxFQUFReEIsRUFBTXdCLFNBQ0FiLElBQTVCVixLQUFLb0IsT0FBT0MsS0FDZHJCLEtBQUtvQixPQUFPQyxHQUFjLElBRzVCckIsS0FBS29CLE9BQU9DLEdBQVlFLEdBQ3RCUCxFQUFhQyxFQUFrQkksR0FHdkMsQ0FnQkYsT0FkRSxZQUFBVCxlQUFBLFdBQ0UsSUFBTVksR0FBYSxJQUFBQyx1QkFBc0IsRUFBR1IsRUFBa0JLLE9BQVMsR0FDakVDLEdBQVEsSUFBQUUsdUJBQXNCLEVBQUd6QixLQUFLb0IsT0FBT0UsT0FBUyxHQUU1RCxHQUFJdEIsS0FBS29CLE9BQU9JLEdBQVlELEdBQVEsQ0FDbEMsSUFBTUcsRUFBUTFCLEtBQUtvQixPQUFPSSxHQUFZRCxHQUl0QyxjQUZPdkIsS0FBS29CLE9BQU9JLEdBQVlELEdBRXhCRyxDLENBR1QsT0FBTzFCLEtBQUtZLGdCQUNkLEVBQ0YsRUFwQ0EsR0FBYSxFQUFBUCxpQkFBQUEsQyw4RUNiQSxFQUFBTSxNQUNYLFNBQXFCZSxHQUFBLEtBQUFBLE1BQUFBLENBQXNCLEMsOEVDUWhDLEVBQUFDLE1BS1gsU0FBWUMsR0FDVjVCLEtBQUs2QixTQUFXRCxFQUFXQyxTQUMzQjdCLEtBQUswQixNQUFRRSxFQUFXRixNQUN4QjFCLEtBQUtELEtBQU82QixFQUFXN0IsSUFDekIsQyw4RkNwQlcsRUFBQTBCLHNCQUF3QixTQUFDSyxFQUFhQyxHQUNqRCxPQUFBQyxLQUFLQyxNQUFNRCxLQUFLRSxVQUFZSCxFQUFNRCxFQUFNLEdBQUtBLEVBQTdDLEMsOGhCQ0NGLGFBRU1LLEVBQW9CLE9BVTFCLGFBV0UsV0FBWVAsRyxRQUNWNUIsS0FBS29DLGNBQWdCUixFQUFXUSxjQUNoQ3BDLEtBQUtxQyxVQUFZVCxFQUFXUyxVQUM1QnJDLEtBQUtHLFNBQVd5QixFQUFXekIsU0FDM0JILEtBQUtzQyxNQUF5QixRQUFqQixFQUFBVixhQUFVLEVBQVZBLEVBQVlVLGFBQUssUUFBSSxJQUNsQ3RDLEtBQUt1QyxPQUEyQixRQUFsQixFQUFBWCxhQUFVLEVBQVZBLEVBQVlXLGNBQU0sUUFBSSxJQUVwQ3ZDLEtBQUt3QyxPQUFTLElBQUlDLElBQ2xCekMsS0FBSzBDLFdBQWEsSUFBSUQsR0FDeEIsQ0F5S0YsT0F2S1MsWUFBQUUsS0FBUCxXQUNFM0MsS0FBSzRDLFlBRUw1QyxLQUFLNkMsWUFDUCxFQUVRLFlBQUFELFVBQVIsV0FDRTVDLEtBQUtxQyxVQUFVUyxhQUFhLFFBQVMsVUFBRzlDLEtBQUtzQyxNQUFLLE9BQ2xEdEMsS0FBS3FDLFVBQVVTLGFBQWEsU0FBVSxVQUFHOUMsS0FBS3VDLE9BQU0sT0FFcER2QyxLQUFLcUMsVUFBVVUsTUFBTUMsZ0JBQWtCLE1BQ3pDLEVBRVEsWUFBQUgsV0FBUixXQUtFLElBSkEsSUFBTUksRUFBWWpELEtBQUtrRCxlQUNqQkMsRUFBY25CLEtBQUtvQixLQUFLcEQsS0FBS3VDLE9BQVNVLEdBQ3RDSSxFQUFnQnJCLEtBQUtvQixLQUFLcEQsS0FBS3NDLE1BQVFXLEdBRXBDSyxFQUFPLEVBQUdBLEVBQU9ILEVBQWFHLElBQ3JDLElBQUssSUFBSUMsRUFBUyxFQUFHQSxFQUFTRixFQUFlRSxJQUMzQ3ZELEtBQUt3RCxZQUNILElBQUksRUFBQTdCLE1BQU0sQ0FDUkUsU0FBVSxDQUFFNEIsRUFBR0YsRUFBUUcsRUFBR0osR0FDMUI1QixNQUFPUyxFQUNQcEMsS0FBTWtELElBS2hCLEVBRVEsWUFBQUMsYUFBUixXQUNFLElBQU1TLEVBQW1CM0IsS0FBS29CLEtBQUtwRCxLQUFLc0MsTUFBUXRDLEtBQUt1QyxRQUMvQ3FCLEVBQ0g1RCxLQUFLRyxTQUFXSCxLQUFLRyxTQUFXLEVBQUt3RCxFQUNsQ0UsRUFBZ0I3RCxLQUFLRyxTQUFXSCxLQUFLRyxTQUFXLEVBQUt3RCxFQUVyREcsRUFBUzlELEtBQUtzQyxNQUFRc0IsRUFBaUI1RCxLQUFLdUMsT0FBU3NCLEVBRTNELE9BQU83QixLQUFLQyxNQUNWNkIsSUFBVyxFQUFJOUQsS0FBS3NDLE1BQVFzQixFQUFpQjVELEtBQUt1QyxPQUFTc0IsRUFFL0QsRUFFUSxZQUFBTCxZQUFSLFNBQW9CTyxHQUNsQi9ELEtBQUt3QyxPQUFPd0IsSUFBSSxVQUFHRCxFQUFNbEMsU0FBUzRCLEVBQUMsWUFBSU0sRUFBTWxDLFNBQVM2QixHQUFLSyxHQUUzRC9ELEtBQUtpRSxZQUFZRixFQUNuQixFQUVRLFlBQUFFLFlBQVIsU0FBb0JGLEdBQ2xCLElBQU1HLEVBQUtILEVBQU1oRSxLQUFPZ0UsRUFBTWxDLFNBQVM0QixFQUNqQ1UsRUFBS0osRUFBTWhFLEtBQU9nRSxFQUFNbEMsU0FBUzZCLEVBRXZDMUQsS0FBS29DLGNBQWNnQyxVQUFVRixFQUFJQyxFQUFJSixFQUFNaEUsS0FBTWdFLEVBQU1oRSxNQUV2REMsS0FBS29DLGNBQWNpQyxVQUFZLEVBQy9CckUsS0FBS29DLGNBQWNrQyxZQUFjbkMsRUFDakNuQyxLQUFLb0MsY0FBY21DLFdBQVdMLEVBQUlDLEVBQUlKLEVBQU1oRSxLQUFNZ0UsRUFBTWhFLE1BRXBEZ0UsRUFBTXJDLFFBQVVTLElBQ2xCbkMsS0FBS29DLGNBQWNvQyxVQUFZVCxFQUFNckMsTUFDckMxQixLQUFLb0MsY0FBY3FDLFNBQ2pCUCxFQUFLLEVBQ0xDLEVBQUssRUFDTEosRUFBTWhFLEtBQU8sRUFDYmdFLEVBQU1oRSxLQUFPLEdBR25CLEVBRU8sWUFBQTJFLFdBQVAsU0FBa0JDLEdBQWxCLFdBQ1ExRSxFQUFRLEVBQUgsR0FBTzBFLEVBQUsxRSxPQUFLLEdBRTVCRCxLQUFLNEUsV0FDSCxDQUNFQyxpQkFBa0I3RSxLQUFLRyxTQUN2QjJFLFlBQWEsU0FBQ3hCLEdBQWlCLE9BQUFBLEVBQXVCLEVBQWhCLEVBQUtuRCxRQUFaLEVBQy9CNEUsbUJBQW9CLEVBQ3BCQyxjQUFlLFNBQUN6QixHQUFtQixPQUFBQSxFQUFTLEVBQUtwRCxRQUFkLEdBRXJDRixFQUFNLElBR1JELEtBQUs0RSxXQUNILENBQ0VDLGlCQUFrQjdFLEtBQUtHLFNBQ3ZCMkUsWUFBYSxTQUFDeEIsR0FBaUIsT0FBQUEsRUFBdUIsRUFBaEIsRUFBS25ELFFBQVosRUFDL0I0RSxtQkFBb0IvRSxLQUFLRyxTQUN6QjZFLGNBQWUsU0FBQ3pCLEdBQW1CLE9BQUFBLEVBQXlCLEVBQWhCLEVBQUtwRCxRQUFkLEdBRXJDRixFQUFNLElBRVJELEtBQUs0RSxXQUNILENBQ0VDLGlCQUFrQjdFLEtBQUtHLFNBQ3ZCMkUsWUFBYSxTQUFDeEIsR0FBaUIsT0FBQUEsRUFBdUIsRUFBaEIsRUFBS25ELFFBQVosRUFDL0I0RSxtQkFBb0MsRUFBaEIvRSxLQUFLRyxTQUN6QjZFLGNBQWUsU0FBQ3pCLEdBQW1CLE9BQUFBLEVBQXlCLEVBQWhCLEVBQUtwRCxRQUFkLEdBRXJDRixFQUFNLElBRVJELEtBQUs0RSxXQUNILENBQ0VDLGlCQUFrQjdFLEtBQUtHLFNBQ3ZCMkUsWUFBYSxTQUFDeEIsR0FBaUIsT0FBQUEsRUFBdUIsRUFBaEIsRUFBS25ELFFBQVosRUFDL0I0RSxtQkFBb0MsRUFBaEIvRSxLQUFLRyxTQUN6QjZFLGNBQWUsU0FBQ3pCLEdBQW1CLE9BQUFBLEVBQXlCLEVBQWhCLEVBQUtwRCxRQUFkLEdBRXJDRixFQUFNLElBRVJELEtBQUs0RSxXQUNILENBQ0VDLGlCQUFrQixFQUNsQkMsWUFBYSxTQUFDeEIsR0FBaUIsT0FBQUEsRUFBTyxFQUFLbkQsUUFBWixFQUMvQjRFLG1CQUFvQi9FLEtBQUtHLFNBQ3pCNkUsY0FBZSxTQUFDekIsR0FBbUIsT0FBQUEsRUFBeUIsRUFBaEIsRUFBS3BELFFBQWQsR0FFckNGLEVBQU0sSUFFUkQsS0FBSzRFLFdBQ0gsQ0FDRUMsaUJBQWtDLEVBQWhCN0UsS0FBS0csU0FDdkIyRSxZQUFhLFNBQUN4QixHQUFpQixPQUFBQSxFQUF1QixFQUFoQixFQUFLbkQsUUFBWixFQUMvQjRFLG1CQUFvQi9FLEtBQUtHLFNBQ3pCNkUsY0FBZSxTQUFDekIsR0FBbUIsT0FBQUEsRUFBeUIsRUFBaEIsRUFBS3BELFFBQWQsR0FFckNGLEVBQU0sR0FFVixFQUVRLFlBQUEyRSxXQUFSLFNBQ0VLLEVBTUFDLEdBTUEsSUFKQSxJQUFJNUIsRUFBTzJCLEVBQWdCSixpQkFDdkJ0QixFQUFTMEIsRUFBZ0JGLG1CQUN6QkksRUFBYSxFQUVWQSxFQUFhRCxFQUFPNUQsUUFBUSxDQUNqQyxLQUFPMkQsRUFBZ0JILFlBQVl4QixJQUFPLENBQ3hDLEtBQU8yQixFQUFnQkQsY0FBY3pCLElBQVMsQ0FDNUMsSUFBTTZCLEVBQWVwRixLQUFLd0MsT0FBTzZDLElBQUksVUFBRzlCLEVBQU0sWUFBSUQsSUFFbER0RCxLQUFLd0QsWUFDSCxJQUFJLEVBQUE3QixNQUFNLEVBQUQsS0FDSnlELEdBQWEsQ0FDaEIxRCxNQUFPd0QsRUFBT0MsR0FBWXpELFVBSTlCeUQsSUFDQTVCLEcsQ0FHRkEsRUFBUzBCLEVBQWdCRixtQkFDekJ6QixHLENBR0ZBLEVBQU8yQixFQUFnQkosZ0IsQ0FFM0IsRUFDRixFQTdMQSxHQUFhLEVBQUFTLFNBQUFBLEMsR0NiVEMsRUFBMkIsQ0FBQyxFQUdoQyxTQUFTQyxFQUFvQkMsR0FFNUIsSUFBSUMsRUFBZUgsRUFBeUJFLEdBQzVDLFFBQXFCL0UsSUFBakJnRixFQUNILE9BQU9BLEVBQWFDLFFBR3JCLElBQUlDLEVBQVNMLEVBQXlCRSxHQUFZLENBR2pERSxRQUFTLENBQUMsR0FPWCxPQUhBRSxFQUFvQkosR0FBVUssS0FBS0YsRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0gsR0FHcEVJLEVBQU9ELE9BQ2YsQ1BwQkEsU0FDQSxTQUVBSSxTQUFTQyxpQkFBaUIsb0JBQW9CLFdBQzVDLElBQU1DLEVBQVVGLFNBQVNHLGVBQWUsUUFDbENDLEVBQU1GLEVBQVFHLFdBQVcsTUFFL0IsR0FBWSxPQUFSRCxFQUNGLE1BQU0sSUFBSUUsTUFBTSx3QkFNbEIsSUFFTUMsRUFBVyxJQUFJLEVBQUFoQixTQUFTLENBQzVCbEQsY0FBZStELEVBQ2Y5RCxVQUFXNEQsRUFDWDlGLFNBTGUsSUFRWHdFLEVBQU8sSUFBSSxFQUFBNUQsS0FSQSxHQVVqQnVGLEVBQVMzRCxPQUVUckMsUUFBUUMsSUFBSSxTQUFVLENBQUVvRSxLQUFJLElBRTVCckUsUUFBUUMsSUFBSSxZQUFhLENBQUVnRyxRQUFTRCxJQUVwQ0EsRUFBUzVCLFdBQVdDLEVBR3RCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yZXNvbHZlZG9yLWN1Ym8tbWFnaWNvLy4vc3JjL21haW4udHMiLCJ3ZWJwYWNrOi8vcmVzb2x2ZWRvci1jdWJvLW1hZ2ljby8uL3NyYy9jdWJlLnRzIiwid2VicGFjazovL3Jlc29sdmVkb3ItY3Viby1tYWdpY28vLi9zcmMvZmFjZXQtY29sb3JzLnRzIiwid2VicGFjazovL3Jlc29sdmVkb3ItY3Viby1tYWdpY28vLi9zcmMvZmFjZXQudHMiLCJ3ZWJwYWNrOi8vcmVzb2x2ZWRvci1jdWJvLW1hZ2ljby8uL3NyYy9waXhlbC50cyIsIndlYnBhY2s6Ly9yZXNvbHZlZG9yLWN1Ym8tbWFnaWNvLy4vc3JjL3V0bHMudHMiLCJ3ZWJwYWNrOi8vcmVzb2x2ZWRvci1jdWJvLW1hZ2ljby8uL3NyYy92aWV3cG9ydC50cyIsIndlYnBhY2s6Ly9yZXNvbHZlZG9yLWN1Ym8tbWFnaWNvL3dlYnBhY2svYm9vdHN0cmFwIl0sInNvdXJjZXNDb250ZW50IjpbIi8vaW1wb3J0IHsgbWFpbkV4YW1wbGVDdWJlRGVtbyB9IGZyb20gXCIuL2V4YW1wbGUtY3ViZS93ZWJnbC1kZW1vXCI7XG5cbmltcG9ydCB7IEN1YmUgfSBmcm9tIFwiLi9jdWJlXCI7XG5pbXBvcnQgeyBWaWV3cG9ydCB9IGZyb20gXCIuL3ZpZXdwb3J0XCI7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcbiAgY29uc3QgZG9tTWFpbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFpblwiKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcbiAgY29uc3QgY3R4ID0gZG9tTWFpbi5nZXRDb250ZXh0KFwiMmRcIik7XG5cbiAgaWYgKGN0eCA9PT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkNhbnZhcyBuw6NvIGVuY290cmFkb1wiKTtcbiAgfVxuXG4gIC8vIGNvbnN0IGN1YmVTaXplID0gcGFyc2VJbnQoXG4gIC8vICAgcHJvbXB0KFwiSW5mb3JtZSBvIHRhbWFuaG8gZG8gY3VibyAoZXguOiAyKTogXCIpID8/IFwiMlwiXG4gIC8vICk7XG4gIGNvbnN0IGN1YmVTaXplID0gMjtcblxuICBjb25zdCB2aWV3cG9ydCA9IG5ldyBWaWV3cG9ydCh7XG4gICAgY2FudmFzQ29udGV4dDogY3R4LFxuICAgIGNhbnZhc0RPTTogZG9tTWFpbixcbiAgICBjdWJlU2l6ZSxcbiAgfSk7XG5cbiAgY29uc3QgY3ViZSA9IG5ldyBDdWJlKGN1YmVTaXplKTtcblxuICB2aWV3cG9ydC5pbml0KCk7XG5cbiAgY29uc29sZS5sb2coXCItLWN1YmVcIiwgeyBjdWJlIH0pO1xuXG4gIGNvbnNvbGUubG9nKFwiLS12aXdwb3J0XCIsIHsgdml3cG9ydDogdmlld3BvcnQgfSk7XG5cbiAgdmlld3BvcnQucmVuZGVyQ3ViZShjdWJlKTtcblxuICAvL21haW5FeGFtcGxlQ3ViZURlbW8oY3R4KTtcbn0pO1xuXG5jb25zdCByZW5kZXJDdWJlID0gKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBjdWJlOiBDdWJlKSA9PiB7fTtcbiIsIi8qKlxuICogRWxlbWVudG9zIGRvIGN1Ym9cbiAqXG4gKiAtIDYgZmFjZXNcbiAqIC0gNTIgZmFjZXRzXG4gKlxuICogLSBxdWFuZG8gdW1hIGxpbmhhL2NvbHVuYSBzZSBtb3ZpbWVudGEgbW92aW1lbnRhIHRvZG9zIG9zIGVsZW1lbnRvc1xuICogICBkZWxhIHBhcmEgbyBzZW50aWRvIGRvIG1vdmltZW50b1xuICpcbiAqIC0gcXVhbmRvIHRvZG9zIGFzIGZhY2VzIHRlbSBhIG1lc21hIGNvciBvIGN1Ym8gZXN0YSBjb21wbGV0b1xuICpcbiAqL1xuXG5pbXBvcnQgeyBGYWNldCB9IGZyb20gXCIuL2ZhY2V0XCI7XG5pbXBvcnQgeyBGYWNldENvbG9yUGlja2VyIH0gZnJvbSBcIi4vZmFjZXQtY29sb3JzXCI7XG5cbmV4cG9ydCB0eXBlIE51bWJlckZhY2VzID0gMSB8IDIgfCAzIHwgNCB8IDUgfCA2O1xuXG5pbnRlcmZhY2UgQ3ViZU1vdmVtZW50IHtcbiAgZmFjZTogTnVtYmVyRmFjZXM7XG4gIGRpcmVjdGlvbjogXCJMRUZUXCIgfCBcIlJJR0hUXCI7XG59XG5cbnR5cGUgRmFjZSA9IEZhY2V0W107XG5cbmV4cG9ydCBjbGFzcyBDdWJlIHtcbiAgLy8gcmVhZG9ubHkgY3VycmVudEZhY2UgPSAxO1xuXG4gIHJlYWRvbmx5IGZhY2VzOiBGYWNlW107XG5cbiAgY29uc3RydWN0b3Ioc2l6ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5mYWNlcyA9IFtdO1xuXG4gICAgdGhpcy5pbml0UmFuZG9tKHNpemUpO1xuICB9XG5cbiAgcHJpdmF0ZSBpbml0UmFuZG9tKHNpemU6IG51bWJlcikge1xuICAgIGNvbnN0IGN1YmVTaXplID0gc2l6ZSAqIHNpemU7XG5cbiAgICBjb25zdCBjb2xvclBpY2tlciA9IG5ldyBGYWNldENvbG9yUGlja2VyKGN1YmVTaXplKTtcblxuICAgIGNvbnNvbGUubG9nKFwiLS0taW5pdFJhbmRvbVwiLCB7IHNpemUsIGN1YmVTaXplLCBjb2xvclBpY2tlciB9KTtcblxuICAgIGZvciAobGV0IGZhY2VJbmRleCA9IDE7IGZhY2VJbmRleCA8PSA2OyBmYWNlSW5kZXgrKykge1xuICAgICAgZm9yIChsZXQgZmFjZXRJbmRleCA9IDA7IGZhY2V0SW5kZXggPCBjdWJlU2l6ZTsgZmFjZXRJbmRleCsrKSB7XG4gICAgICAgIGlmICh0aGlzLmZhY2VzW2ZhY2VJbmRleF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRoaXMuZmFjZXNbZmFjZUluZGV4XSA9IFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5mYWNlc1tmYWNlSW5kZXhdW2ZhY2V0SW5kZXhdID0gbmV3IEZhY2V0KFxuICAgICAgICAgIGNvbG9yUGlja2VyLnBvcFJhbmRvbUNvbG9yKClcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBtb3ZlKG1vdmVtZW50OiBDdWJlTW92ZW1lbnQpIHt9XG59XG4iLCJpbXBvcnQgeyByYW5kb21JbnRGcm9tSW50ZXJ2YWwgfSBmcm9tIFwiLi91dGxzXCI7XG5cbmV4cG9ydCBlbnVtIEZBQ0VUX0NPTE9SUyB7XG4gIFJFRCA9IFwiI0Y0NDMzNlwiLFxuICBHUkVFTiA9IFwiIzRDQUY1MFwiLFxuICBCTFVFID0gXCIjMDNBOUY0XCIsXG4gIFlFTExPVyA9IFwiI0ZGRUIzQlwiLFxuICBPUkFOR0UgPSBcIiNGQjhDMDBcIixcbiAgR1JFWSA9IFwiIzc5NTU0OFwiLFxufVxuXG5jb25zdCBGQUNFVF9DT0xPUlNfS0VZUyA9IE9iamVjdC5rZXlzKEZBQ0VUX0NPTE9SUyk7XG5cbnR5cGUgRmFjZXRDb2xvcnNLZXlzVHlwZSA9IGtleW9mIHR5cGVvZiBGQUNFVF9DT0xPUlM7XG5cbmV4cG9ydCBjbGFzcyBGYWNldENvbG9yUGlja2VyIHtcbiAgcmVhZG9ubHkgY29sb3JzOiBGQUNFVF9DT0xPUlNbXVtdO1xuXG4gIGNvbnN0cnVjdG9yKHJlYWRvbmx5IHNpemU6IG51bWJlcikge1xuICAgIHRoaXMuY29sb3JzID0gW107XG5cbiAgICBmb3IgKFxuICAgICAgbGV0IGNvbG9ySW5kZXggPSAwO1xuICAgICAgY29sb3JJbmRleCA8IEZBQ0VUX0NPTE9SU19LRVlTLmxlbmd0aDtcbiAgICAgIGNvbG9ySW5kZXgrK1xuICAgICkge1xuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHNpemU7IGluZGV4KyspIHtcbiAgICAgICAgaWYgKHRoaXMuY29sb3JzW2NvbG9ySW5kZXhdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB0aGlzLmNvbG9yc1tjb2xvckluZGV4XSA9IFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jb2xvcnNbY29sb3JJbmRleF1baW5kZXhdID1cbiAgICAgICAgICBGQUNFVF9DT0xPUlNbRkFDRVRfQ09MT1JTX0tFWVNbY29sb3JJbmRleF0gYXMgRmFjZXRDb2xvcnNLZXlzVHlwZV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcG9wUmFuZG9tQ29sb3IoKTogRkFDRVRfQ09MT1JTIHtcbiAgICBjb25zdCBpbmRleENvbG9yID0gcmFuZG9tSW50RnJvbUludGVydmFsKDAsIEZBQ0VUX0NPTE9SU19LRVlTLmxlbmd0aCAtIDEpO1xuICAgIGNvbnN0IGluZGV4ID0gcmFuZG9tSW50RnJvbUludGVydmFsKDAsIHRoaXMuY29sb3JzLmxlbmd0aCAtIDEpO1xuXG4gICAgaWYgKHRoaXMuY29sb3JzW2luZGV4Q29sb3JdW2luZGV4XSkge1xuICAgICAgY29uc3QgY29sb3IgPSB0aGlzLmNvbG9yc1tpbmRleENvbG9yXVtpbmRleF07XG5cbiAgICAgIGRlbGV0ZSB0aGlzLmNvbG9yc1tpbmRleENvbG9yXVtpbmRleF07XG5cbiAgICAgIHJldHVybiBjb2xvcjtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5wb3BSYW5kb21Db2xvcigpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBGQUNFVF9DT0xPUlMgfSBmcm9tIFwiLi9mYWNldC1jb2xvcnNcIjtcblxuZXhwb3J0IGNsYXNzIEZhY2V0IHtcbiAgY29uc3RydWN0b3IocmVhZG9ubHkgY29sb3I6IEZBQ0VUX0NPTE9SUykge31cbn1cbiIsImludGVyZmFjZSBQaXhlbFBvc2l0aW9uIHtcbiAgcmVhZG9ubHkgeDogbnVtYmVyO1xuICByZWFkb25seSB5OiBudW1iZXI7XG59XG5cbmludGVyZmFjZSBQaXhlbEF0dHJpYnV0ZXMge1xuICByZWFkb25seSBwb3NpdGlvbjogUGl4ZWxQb3NpdGlvbjtcbiAgcmVhZG9ubHkgY29sb3I6IHN0cmluZztcbiAgcmVhZG9ubHkgc2l6ZTogbnVtYmVyO1xufVxuXG5leHBvcnQgY2xhc3MgUGl4ZWwgaW1wbGVtZW50cyBQaXhlbEF0dHJpYnV0ZXMge1xuICByZWFkb25seSBwb3NpdGlvbjogUGl4ZWxQb3NpdGlvbjtcbiAgcmVhZG9ubHkgY29sb3I6IHN0cmluZztcbiAgcmVhZG9ubHkgc2l6ZTogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKGF0dHJpYnV0ZXM6IFBpeGVsQXR0cmlidXRlcykge1xuICAgIHRoaXMucG9zaXRpb24gPSBhdHRyaWJ1dGVzLnBvc2l0aW9uO1xuICAgIHRoaXMuY29sb3IgPSBhdHRyaWJ1dGVzLmNvbG9yO1xuICAgIHRoaXMuc2l6ZSA9IGF0dHJpYnV0ZXMuc2l6ZTtcbiAgfVxufVxuIiwiZXhwb3J0IGNvbnN0IHJhbmRvbUludEZyb21JbnRlcnZhbCA9IChtaW46IG51bWJlciwgbWF4OiBudW1iZXIpID0+XG4gIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSArIG1pbik7XG4iLCJpbXBvcnQgeyBDdWJlLCBOdW1iZXJGYWNlcyB9IGZyb20gXCIuL2N1YmVcIjtcclxuaW1wb3J0IHsgRmFjZXQgfSBmcm9tIFwiLi9mYWNldFwiO1xyXG5pbXBvcnQgeyBQaXhlbCB9IGZyb20gXCIuL3BpeGVsXCI7XHJcblxyXG5jb25zdCBFTVBUWV9QSVhFTF9DT0xPUiA9IFwiI2NjY1wiO1xyXG5cclxuaW50ZXJmYWNlIFZpZXdwb3J0QXR0cmlidXRlcyB7XHJcbiAgcmVhZG9ubHkgY2FudmFzQ29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG4gIHJlYWRvbmx5IGNhbnZhc0RPTTogSFRNTENhbnZhc0VsZW1lbnQ7XHJcbiAgcmVhZG9ubHkgY3ViZVNpemU6IG51bWJlcjtcclxuICByZWFkb25seSB3aWR0aD86IG51bWJlcjtcclxuICByZWFkb25seSBoZWlnaHQ/OiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBWaWV3cG9ydCB7XHJcbiAgcHJpdmF0ZSBjYW52YXNDb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcbiAgcHJpdmF0ZSBjYW52YXNET006IEhUTUxDYW52YXNFbGVtZW50O1xyXG4gIHJlYWRvbmx5IGN1YmVTaXplOiBudW1iZXI7XHJcbiAgcHJpdmF0ZSB3aWR0aDogbnVtYmVyO1xyXG4gIHByaXZhdGUgaGVpZ2h0OiBudW1iZXI7XHJcblxyXG4gIHByaXZhdGUgcGl4ZWxzOiBNYXA8c3RyaW5nLCBQaXhlbD47XHJcblxyXG4gIHByaXZhdGUgY3ViZVBpeGVsczogTWFwPE51bWJlckZhY2VzLCBQaXhlbFtdPjtcclxuXHJcbiAgY29uc3RydWN0b3IoYXR0cmlidXRlczogVmlld3BvcnRBdHRyaWJ1dGVzKSB7XHJcbiAgICB0aGlzLmNhbnZhc0NvbnRleHQgPSBhdHRyaWJ1dGVzLmNhbnZhc0NvbnRleHQ7XHJcbiAgICB0aGlzLmNhbnZhc0RPTSA9IGF0dHJpYnV0ZXMuY2FudmFzRE9NO1xyXG4gICAgdGhpcy5jdWJlU2l6ZSA9IGF0dHJpYnV0ZXMuY3ViZVNpemU7XHJcbiAgICB0aGlzLndpZHRoID0gYXR0cmlidXRlcz8ud2lkdGggPz8gNjQwO1xyXG4gICAgdGhpcy5oZWlnaHQgPSBhdHRyaWJ1dGVzPy5oZWlnaHQgPz8gNDgwO1xyXG5cclxuICAgIHRoaXMucGl4ZWxzID0gbmV3IE1hcCgpO1xyXG4gICAgdGhpcy5jdWJlUGl4ZWxzID0gbmV3IE1hcCgpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGluaXQoKSB7XHJcbiAgICB0aGlzLmluaXRTdHlsZSgpO1xyXG5cclxuICAgIHRoaXMuaW5pdFBpeGVscygpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBpbml0U3R5bGUoKSB7XHJcbiAgICB0aGlzLmNhbnZhc0RPTS5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLCBgJHt0aGlzLndpZHRofXB4YCk7XHJcbiAgICB0aGlzLmNhbnZhc0RPTS5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIiwgYCR7dGhpcy5oZWlnaHR9cHhgKTtcclxuXHJcbiAgICB0aGlzLmNhbnZhc0RPTS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIiMzMzNcIjtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgaW5pdFBpeGVscygpIHtcclxuICAgIGNvbnN0IHBpeGVsU2l6ZSA9IHRoaXMuZ2V0UGl4ZWxTaXplKCk7XHJcbiAgICBjb25zdCBudW1iZXJMaW5lcyA9IE1hdGguY2VpbCh0aGlzLmhlaWdodCAvIHBpeGVsU2l6ZSk7XHJcbiAgICBjb25zdCBudW1iZXJDb2x1bW5zID0gTWF0aC5jZWlsKHRoaXMud2lkdGggLyBwaXhlbFNpemUpO1xyXG5cclxuICAgIGZvciAobGV0IGxpbmUgPSAwOyBsaW5lIDwgbnVtYmVyTGluZXM7IGxpbmUrKykge1xyXG4gICAgICBmb3IgKGxldCBjb2x1bW4gPSAwOyBjb2x1bW4gPCBudW1iZXJDb2x1bW5zOyBjb2x1bW4rKykge1xyXG4gICAgICAgIHRoaXMudXBkYXRlUGl4ZWwoXHJcbiAgICAgICAgICBuZXcgUGl4ZWwoe1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogeyB4OiBjb2x1bW4sIHk6IGxpbmUgfSxcclxuICAgICAgICAgICAgY29sb3I6IEVNUFRZX1BJWEVMX0NPTE9SLFxyXG4gICAgICAgICAgICBzaXplOiBwaXhlbFNpemUsXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0UGl4ZWxTaXplKCkge1xyXG4gICAgY29uc3QgcGl4ZWxTZWl6ZUZhY3RvciA9IE1hdGguY2VpbCh0aGlzLndpZHRoIC8gdGhpcy5oZWlnaHQpO1xyXG4gICAgY29uc3QgbWluQ3ViZUNvbHVtbnMgPVxyXG4gICAgICAodGhpcy5jdWJlU2l6ZSAqIHRoaXMuY3ViZVNpemUgKiA0KSAvIHBpeGVsU2VpemVGYWN0b3I7XHJcbiAgICBjb25zdCBtaW5DdWJlTGluZXMgPSAodGhpcy5jdWJlU2l6ZSAqIHRoaXMuY3ViZVNpemUgKiAzKSAvIHBpeGVsU2VpemVGYWN0b3I7XHJcblxyXG4gICAgY29uc3QgcmVzdWx0ID0gdGhpcy53aWR0aCAvIG1pbkN1YmVDb2x1bW5zIC0gdGhpcy5oZWlnaHQgLyBtaW5DdWJlTGluZXM7XHJcblxyXG4gICAgcmV0dXJuIE1hdGguZmxvb3IoXHJcbiAgICAgIHJlc3VsdCA8PSAtMSA/IHRoaXMud2lkdGggLyBtaW5DdWJlQ29sdW1ucyA6IHRoaXMuaGVpZ2h0IC8gbWluQ3ViZUxpbmVzXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB1cGRhdGVQaXhlbChwaXhlbDogUGl4ZWwpIHtcclxuICAgIHRoaXMucGl4ZWxzLnNldChgJHtwaXhlbC5wb3NpdGlvbi54fS0ke3BpeGVsLnBvc2l0aW9uLnl9YCwgcGl4ZWwpO1xyXG5cclxuICAgIHRoaXMucmVuZGVyUGl4ZWwocGl4ZWwpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByZW5kZXJQaXhlbChwaXhlbDogUGl4ZWwpIHtcclxuICAgIGNvbnN0IF94ID0gcGl4ZWwuc2l6ZSAqIHBpeGVsLnBvc2l0aW9uLng7XHJcbiAgICBjb25zdCBfeSA9IHBpeGVsLnNpemUgKiBwaXhlbC5wb3NpdGlvbi55O1xyXG5cclxuICAgIHRoaXMuY2FudmFzQ29udGV4dC5jbGVhclJlY3QoX3gsIF95LCBwaXhlbC5zaXplLCBwaXhlbC5zaXplKTtcclxuXHJcbiAgICB0aGlzLmNhbnZhc0NvbnRleHQubGluZVdpZHRoID0gMjtcclxuICAgIHRoaXMuY2FudmFzQ29udGV4dC5zdHJva2VTdHlsZSA9IEVNUFRZX1BJWEVMX0NPTE9SO1xyXG4gICAgdGhpcy5jYW52YXNDb250ZXh0LnN0cm9rZVJlY3QoX3gsIF95LCBwaXhlbC5zaXplLCBwaXhlbC5zaXplKTtcclxuXHJcbiAgICBpZiAocGl4ZWwuY29sb3IgIT09IEVNUFRZX1BJWEVMX0NPTE9SKSB7XHJcbiAgICAgIHRoaXMuY2FudmFzQ29udGV4dC5maWxsU3R5bGUgPSBwaXhlbC5jb2xvcjtcclxuICAgICAgdGhpcy5jYW52YXNDb250ZXh0LmZpbGxSZWN0KFxyXG4gICAgICAgIF94ICsgMSxcclxuICAgICAgICBfeSArIDEsXHJcbiAgICAgICAgcGl4ZWwuc2l6ZSAtIDIsXHJcbiAgICAgICAgcGl4ZWwuc2l6ZSAtIDJcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyByZW5kZXJDdWJlKGN1YmU6IEN1YmUpIHtcclxuICAgIGNvbnN0IGZhY2VzID0gWy4uLmN1YmUuZmFjZXNdO1xyXG5cclxuICAgIHRoaXMucmVuZGVyRmFjZShcclxuICAgICAge1xyXG4gICAgICAgIGxpbmVJbml0aWFsVmFsdWU6IHRoaXMuY3ViZVNpemUsXHJcbiAgICAgICAgbGluZUlzVmFsaWQ6IChsaW5lOiBudW1iZXIpID0+IGxpbmUgPCB0aGlzLmN1YmVTaXplICogMixcclxuICAgICAgICBjb2x1bW5Jbml0aWFsVmFsdWU6IDAsXHJcbiAgICAgICAgY29sdW1uSXNWYWxpZDogKGNvbHVtbjogbnVtYmVyKSA9PiBjb2x1bW4gPCB0aGlzLmN1YmVTaXplLFxyXG4gICAgICB9LFxyXG4gICAgICBmYWNlc1sxXVxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLnJlbmRlckZhY2UoXHJcbiAgICAgIHtcclxuICAgICAgICBsaW5lSW5pdGlhbFZhbHVlOiB0aGlzLmN1YmVTaXplLFxyXG4gICAgICAgIGxpbmVJc1ZhbGlkOiAobGluZTogbnVtYmVyKSA9PiBsaW5lIDwgdGhpcy5jdWJlU2l6ZSAqIDIsXHJcbiAgICAgICAgY29sdW1uSW5pdGlhbFZhbHVlOiB0aGlzLmN1YmVTaXplLFxyXG4gICAgICAgIGNvbHVtbklzVmFsaWQ6IChjb2x1bW46IG51bWJlcikgPT4gY29sdW1uIDwgdGhpcy5jdWJlU2l6ZSAqIDIsXHJcbiAgICAgIH0sXHJcbiAgICAgIGZhY2VzWzJdXHJcbiAgICApO1xyXG4gICAgdGhpcy5yZW5kZXJGYWNlKFxyXG4gICAgICB7XHJcbiAgICAgICAgbGluZUluaXRpYWxWYWx1ZTogdGhpcy5jdWJlU2l6ZSxcclxuICAgICAgICBsaW5lSXNWYWxpZDogKGxpbmU6IG51bWJlcikgPT4gbGluZSA8IHRoaXMuY3ViZVNpemUgKiAyLFxyXG4gICAgICAgIGNvbHVtbkluaXRpYWxWYWx1ZTogdGhpcy5jdWJlU2l6ZSAqIDIsXHJcbiAgICAgICAgY29sdW1uSXNWYWxpZDogKGNvbHVtbjogbnVtYmVyKSA9PiBjb2x1bW4gPCB0aGlzLmN1YmVTaXplICogMyxcclxuICAgICAgfSxcclxuICAgICAgZmFjZXNbM11cclxuICAgICk7XHJcbiAgICB0aGlzLnJlbmRlckZhY2UoXHJcbiAgICAgIHtcclxuICAgICAgICBsaW5lSW5pdGlhbFZhbHVlOiB0aGlzLmN1YmVTaXplLFxyXG4gICAgICAgIGxpbmVJc1ZhbGlkOiAobGluZTogbnVtYmVyKSA9PiBsaW5lIDwgdGhpcy5jdWJlU2l6ZSAqIDIsXHJcbiAgICAgICAgY29sdW1uSW5pdGlhbFZhbHVlOiB0aGlzLmN1YmVTaXplICogMyxcclxuICAgICAgICBjb2x1bW5Jc1ZhbGlkOiAoY29sdW1uOiBudW1iZXIpID0+IGNvbHVtbiA8IHRoaXMuY3ViZVNpemUgKiA0LFxyXG4gICAgICB9LFxyXG4gICAgICBmYWNlc1s0XVxyXG4gICAgKTtcclxuICAgIHRoaXMucmVuZGVyRmFjZShcclxuICAgICAge1xyXG4gICAgICAgIGxpbmVJbml0aWFsVmFsdWU6IDAsXHJcbiAgICAgICAgbGluZUlzVmFsaWQ6IChsaW5lOiBudW1iZXIpID0+IGxpbmUgPCB0aGlzLmN1YmVTaXplLFxyXG4gICAgICAgIGNvbHVtbkluaXRpYWxWYWx1ZTogdGhpcy5jdWJlU2l6ZSxcclxuICAgICAgICBjb2x1bW5Jc1ZhbGlkOiAoY29sdW1uOiBudW1iZXIpID0+IGNvbHVtbiA8IHRoaXMuY3ViZVNpemUgKiAyLFxyXG4gICAgICB9LFxyXG4gICAgICBmYWNlc1s1XVxyXG4gICAgKTtcclxuICAgIHRoaXMucmVuZGVyRmFjZShcclxuICAgICAge1xyXG4gICAgICAgIGxpbmVJbml0aWFsVmFsdWU6IHRoaXMuY3ViZVNpemUgKiAyLFxyXG4gICAgICAgIGxpbmVJc1ZhbGlkOiAobGluZTogbnVtYmVyKSA9PiBsaW5lIDwgdGhpcy5jdWJlU2l6ZSAqIDMsXHJcbiAgICAgICAgY29sdW1uSW5pdGlhbFZhbHVlOiB0aGlzLmN1YmVTaXplLFxyXG4gICAgICAgIGNvbHVtbklzVmFsaWQ6IChjb2x1bW46IG51bWJlcikgPT4gY29sdW1uIDwgdGhpcy5jdWJlU2l6ZSAqIDIsXHJcbiAgICAgIH0sXHJcbiAgICAgIGZhY2VzWzZdXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByZW5kZXJGYWNlKFxyXG4gICAgcmVuZGVyQXJndW1lbnRzOiB7XHJcbiAgICAgIGxpbmVJbml0aWFsVmFsdWU6IG51bWJlcjtcclxuICAgICAgbGluZUlzVmFsaWQ6IChsaW5lOiBudW1iZXIpID0+IGJvb2xlYW47XHJcbiAgICAgIGNvbHVtbkluaXRpYWxWYWx1ZTogbnVtYmVyO1xyXG4gICAgICBjb2x1bW5Jc1ZhbGlkOiAoY29sdW1uOiBudW1iZXIpID0+IGJvb2xlYW47XHJcbiAgICB9LFxyXG4gICAgZmFjZXRzOiBGYWNldFtdXHJcbiAgKSB7XHJcbiAgICBsZXQgbGluZSA9IHJlbmRlckFyZ3VtZW50cy5saW5lSW5pdGlhbFZhbHVlO1xyXG4gICAgbGV0IGNvbHVtbiA9IHJlbmRlckFyZ3VtZW50cy5jb2x1bW5Jbml0aWFsVmFsdWU7XHJcbiAgICBsZXQgaW5kZXhGYWNldCA9IDA7XHJcblxyXG4gICAgd2hpbGUgKGluZGV4RmFjZXQgPCBmYWNldHMubGVuZ3RoKSB7XHJcbiAgICAgIHdoaWxlIChyZW5kZXJBcmd1bWVudHMubGluZUlzVmFsaWQobGluZSkpIHtcclxuICAgICAgICB3aGlsZSAocmVuZGVyQXJndW1lbnRzLmNvbHVtbklzVmFsaWQoY29sdW1uKSkge1xyXG4gICAgICAgICAgY29uc3QgY3VycmVudFBpeGVsID0gdGhpcy5waXhlbHMuZ2V0KGAke2NvbHVtbn0tJHtsaW5lfWApO1xyXG5cclxuICAgICAgICAgIHRoaXMudXBkYXRlUGl4ZWwoXHJcbiAgICAgICAgICAgIG5ldyBQaXhlbCh7XHJcbiAgICAgICAgICAgICAgLi4uY3VycmVudFBpeGVsISxcclxuICAgICAgICAgICAgICBjb2xvcjogZmFjZXRzW2luZGV4RmFjZXRdLmNvbG9yLFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICBpbmRleEZhY2V0Kys7XHJcbiAgICAgICAgICBjb2x1bW4rKztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbHVtbiA9IHJlbmRlckFyZ3VtZW50cy5jb2x1bW5Jbml0aWFsVmFsdWU7XHJcbiAgICAgICAgbGluZSsrO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBsaW5lID0gcmVuZGVyQXJndW1lbnRzLmxpbmVJbml0aWFsVmFsdWU7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iXSwibmFtZXMiOlsic2l6ZSIsInRoaXMiLCJmYWNlcyIsImluaXRSYW5kb20iLCJjdWJlU2l6ZSIsImNvbG9yUGlja2VyIiwiRmFjZXRDb2xvclBpY2tlciIsImNvbnNvbGUiLCJsb2ciLCJmYWNlSW5kZXgiLCJmYWNldEluZGV4IiwidW5kZWZpbmVkIiwiRmFjZXQiLCJwb3BSYW5kb21Db2xvciIsIm1vdmUiLCJtb3ZlbWVudCIsIkN1YmUiLCJGQUNFVF9DT0xPUlMiLCJGQUNFVF9DT0xPUlNfS0VZUyIsIk9iamVjdCIsImtleXMiLCJjb2xvcnMiLCJjb2xvckluZGV4IiwibGVuZ3RoIiwiaW5kZXgiLCJpbmRleENvbG9yIiwicmFuZG9tSW50RnJvbUludGVydmFsIiwiY29sb3IiLCJQaXhlbCIsImF0dHJpYnV0ZXMiLCJwb3NpdGlvbiIsIm1pbiIsIm1heCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsIkVNUFRZX1BJWEVMX0NPTE9SIiwiY2FudmFzQ29udGV4dCIsImNhbnZhc0RPTSIsIndpZHRoIiwiaGVpZ2h0IiwicGl4ZWxzIiwiTWFwIiwiY3ViZVBpeGVscyIsImluaXQiLCJpbml0U3R5bGUiLCJpbml0UGl4ZWxzIiwic2V0QXR0cmlidXRlIiwic3R5bGUiLCJiYWNrZ3JvdW5kQ29sb3IiLCJwaXhlbFNpemUiLCJnZXRQaXhlbFNpemUiLCJudW1iZXJMaW5lcyIsImNlaWwiLCJudW1iZXJDb2x1bW5zIiwibGluZSIsImNvbHVtbiIsInVwZGF0ZVBpeGVsIiwieCIsInkiLCJwaXhlbFNlaXplRmFjdG9yIiwibWluQ3ViZUNvbHVtbnMiLCJtaW5DdWJlTGluZXMiLCJyZXN1bHQiLCJwaXhlbCIsInNldCIsInJlbmRlclBpeGVsIiwiX3giLCJfeSIsImNsZWFyUmVjdCIsImxpbmVXaWR0aCIsInN0cm9rZVN0eWxlIiwic3Ryb2tlUmVjdCIsImZpbGxTdHlsZSIsImZpbGxSZWN0IiwicmVuZGVyQ3ViZSIsImN1YmUiLCJyZW5kZXJGYWNlIiwibGluZUluaXRpYWxWYWx1ZSIsImxpbmVJc1ZhbGlkIiwiY29sdW1uSW5pdGlhbFZhbHVlIiwiY29sdW1uSXNWYWxpZCIsInJlbmRlckFyZ3VtZW50cyIsImZhY2V0cyIsImluZGV4RmFjZXQiLCJjdXJyZW50UGl4ZWwiLCJnZXQiLCJWaWV3cG9ydCIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiY2FsbCIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImRvbU1haW4iLCJnZXRFbGVtZW50QnlJZCIsImN0eCIsImdldENvbnRleHQiLCJFcnJvciIsInZpZXdwb3J0Iiwidml3cG9ydCJdLCJzb3VyY2VSb290IjoiIn0=