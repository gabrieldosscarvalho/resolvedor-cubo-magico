(()=>{"use strict";var e,i,t={712:(e,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Cube=void 0;var n=t(383),o=t(213),r=function(){function e(e){this.faces=[],this.size=e}return e.prototype.initRandom=function(){var e=this.size*this.size,i=new o.FacetColorPicker(e);console.log("---initRandom",{size:this.size,cubeSize:e,colorPicker:i});for(var t=1;t<=6;t++)for(var r=0;r<e;r++)void 0===this.faces[t]&&(this.faces[t]=[]),this.faces[t][r]=new n.Facet(i.popRandomColor())},e.prototype.move=function(e){},e}();i.Cube=r},213:(e,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FacetColorPicker=i.FACET_COLORS=void 0;var n,o=t(569);!function(e){e.RED="#F44336",e.GREEN="#4CAF50",e.BLUE="#03A9F4",e.YELLOW="#FFEB3B",e.ORANGE="#FB8C00",e.GREY="#795548"}(n=i.FACET_COLORS||(i.FACET_COLORS={}));var r=Object.keys(n),c=function(){function e(e){this.size=e,this.colors=[];for(var i=0;i<r.length;i++)for(var t=0;t<e;t++)void 0===this.colors[i]&&(this.colors[i]=[]),this.colors[i][t]=n[r[i]]}return e.prototype.popRandomColor=function(){var e=(0,o.randomIntFromInterval)(0,r.length-1),i=(0,o.randomIntFromInterval)(0,this.colors.length-1);if(this.colors[e][i]){var t=this.colors[e][i];return delete this.colors[e][i],t}return this.popRandomColor()},e}();i.FacetColorPicker=c},383:(e,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Facet=void 0;i.Facet=function(e){this.color=e}},890:(e,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Pixel=void 0;i.Pixel=function(e){this.position=e.position,this.color=e.color,this.size=e.size}},569:(e,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.randomIntFromInterval=void 0,i.randomIntFromInterval=function(e,i){return Math.floor(Math.random()*(i-e+1)+e)}},281:function(e,i,t){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var i,t=1,n=arguments.length;t<n;t++)for(var o in i=arguments[t])Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,i,t){if(t||2===arguments.length)for(var n,o=0,r=i.length;o<r;o++)!n&&o in i||(n||(n=Array.prototype.slice.call(i,0,o)),n[o]=i[o]);return e.concat(n||Array.prototype.slice.call(i))};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;var r=t(890),c="#ccc",s=function(){function e(e){var i,t;this.canvasContext=e.canvasContext,this.canvasDOM=e.canvasDOM,this.cubeSize=e.cubeSize,this.width=null!==(i=null==e?void 0:e.width)&&void 0!==i?i:640,this.height=null!==(t=null==e?void 0:e.height)&&void 0!==t?t:480,this.pixels=new Map,this.cubePixels=new Map}return e.prototype.init=function(){this.initStyle(),this.initPixels()},e.prototype.initStyle=function(){this.canvasDOM.setAttribute("width","".concat(this.width,"px")),this.canvasDOM.setAttribute("height","".concat(this.height,"px")),this.canvasDOM.style.backgroundColor="#333"},e.prototype.initPixels=function(){for(var e=this.getPixelSize(),i=Math.ceil(this.height/e),t=Math.ceil(this.width/e),n=0;n<i;n++)for(var o=0;o<t;o++)this.updatePixel(new r.Pixel({position:{x:o,y:n},color:c,size:e}))},e.prototype.getPixelSize=function(){var e=Math.ceil(this.width/this.height),i=this.cubeSize*this.cubeSize*4/e,t=this.cubeSize*this.cubeSize*3/e,n=this.width/i-this.height/t;return Math.floor(n<=-1?this.width/i:this.height/t)},e.prototype.updatePixel=function(e){this.pixels.set("".concat(e.position.x,"-").concat(e.position.y),e),this.renderPixel(e)},e.prototype.renderPixel=function(e){var i=e.size*e.position.x,t=e.size*e.position.y;this.canvasContext.clearRect(i,t,e.size,e.size),this.canvasContext.lineWidth=2,this.canvasContext.strokeStyle=c,this.canvasContext.strokeRect(i,t,e.size,e.size),e.color!==c&&(this.canvasContext.fillStyle=e.color,this.canvasContext.fillRect(i+1,t+1,e.size-2,e.size-2))},e.prototype.renderCube=function(e){var i=this,t=o([],e.faces,!0);this.renderFace({lineInitialValue:this.cubeSize,lineIsValid:function(e){return e<2*i.cubeSize},columnInitialValue:0,columnIsValid:function(e){return e<i.cubeSize}},t[1]),this.renderFace({lineInitialValue:this.cubeSize,lineIsValid:function(e){return e<2*i.cubeSize},columnInitialValue:this.cubeSize,columnIsValid:function(e){return e<2*i.cubeSize}},t[2]),this.renderFace({lineInitialValue:this.cubeSize,lineIsValid:function(e){return e<2*i.cubeSize},columnInitialValue:2*this.cubeSize,columnIsValid:function(e){return e<3*i.cubeSize}},t[3]),this.renderFace({lineInitialValue:this.cubeSize,lineIsValid:function(e){return e<2*i.cubeSize},columnInitialValue:3*this.cubeSize,columnIsValid:function(e){return e<4*i.cubeSize}},t[4]),this.renderFace({lineInitialValue:0,lineIsValid:function(e){return e<i.cubeSize},columnInitialValue:this.cubeSize,columnIsValid:function(e){return e<2*i.cubeSize}},t[5]),this.renderFace({lineInitialValue:2*this.cubeSize,lineIsValid:function(e){return e<3*i.cubeSize},columnInitialValue:this.cubeSize,columnIsValid:function(e){return e<2*i.cubeSize}},t[6])},e.prototype.renderFace=function(e,i){for(var t=e.lineInitialValue,o=e.columnInitialValue,c=0;c<i.length;){for(;e.lineIsValid(t);){for(;e.columnIsValid(o);){var s=this.pixels.get("".concat(o,"-").concat(t));this.updatePixel(new r.Pixel(n(n({},s),{color:i[c].color}))),c++,o++}o=e.columnInitialValue,t++}t=e.lineInitialValue}},e}();i.Viewport=s}},n={};function o(e){var i=n[e];if(void 0!==i)return i.exports;var r=n[e]={exports:{}};return t[e].call(r.exports,r,r.exports,o),r.exports}e=o(712),i=o(281),document.addEventListener("DOMContentLoaded",(function(){var t=document.getElementById("main"),n=t.getContext("2d");if(null===n)throw new Error("Canvas nÃ£o encotrado");var o=new i.Viewport({canvasContext:n,canvasDOM:t,cubeSize:2}),r=new e.Cube(2);r.initRandom(),o.init(),console.log("--cube",{cube:r}),console.log("--viwport",{viwport:o}),o.renderCube(r)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVuZGxlLmpzIiwibWFwcGluZ3MiOiJ1QkFFQSxFQUNBLEUsZ0ZDVUEsYUFDQSxTQVdBLGFBT0UsV0FBWUEsR0FDVkMsS0FBS0MsTUFBUSxHQUNiRCxLQUFLRCxLQUFPQSxDQUNkLENBdUJGLE9BckJTLFlBQUFHLFdBQVAsV0FDRSxJQUFNQyxFQUFXSCxLQUFLRCxLQUFPQyxLQUFLRCxLQUU1QkssRUFBYyxJQUFJLEVBQUFDLGlCQUFpQkYsR0FFekNHLFFBQVFDLElBQUksZ0JBQWlCLENBQUVSLEtBQU1DLEtBQUtELEtBQU1JLFNBQVEsRUFBRUMsWUFBVyxJQUVyRSxJQUFLLElBQUlJLEVBQVksRUFBR0EsR0FBYSxFQUFHQSxJQUN0QyxJQUFLLElBQUlDLEVBQWEsRUFBR0EsRUFBYU4sRUFBVU0sU0FDaEJDLElBQTFCVixLQUFLQyxNQUFNTyxLQUNiUixLQUFLQyxNQUFNTyxHQUFhLElBRzFCUixLQUFLQyxNQUFNTyxHQUFXQyxHQUFjLElBQUksRUFBQUUsTUFDdENQLEVBQVlRLGlCQUlwQixFQUVBLFlBQUFDLEtBQUEsU0FBS0MsR0FBeUIsRUFDaEMsRUFqQ0EsR0FBYSxFQUFBQyxLQUFBQSxDLDBHQ3pCYixJQUVZQyxFQUZaLFVBRUEsU0FBWUEsR0FDVixnQkFDQSxrQkFDQSxpQkFDQSxtQkFDQSxtQkFDQSxnQkFDRCxDQVBELENBQVlBLEVBQUEsRUFBQUEsZUFBQSxFQUFBQSxhQUFZLEtBU3hCLElBQU1DLEVBQW9CQyxPQUFPQyxLQUFLSCxHQUl0QyxhQUdFLFdBQXFCakIsR0FBQSxLQUFBQSxLQUFBQSxFQUNuQkMsS0FBS29CLE9BQVMsR0FFZCxJQUNFLElBQUlDLEVBQWEsRUFDakJBLEVBQWFKLEVBQWtCSyxPQUMvQkQsSUFFQSxJQUFLLElBQUlFLEVBQVEsRUFBR0EsRUFBUXhCLEVBQU13QixTQUNBYixJQUE1QlYsS0FBS29CLE9BQU9DLEtBQ2RyQixLQUFLb0IsT0FBT0MsR0FBYyxJQUc1QnJCLEtBQUtvQixPQUFPQyxHQUFZRSxHQUN0QlAsRUFBYUMsRUFBa0JJLEdBR3ZDLENBZ0JGLE9BZEUsWUFBQVQsZUFBQSxXQUNFLElBQU1ZLEdBQWEsSUFBQUMsdUJBQXNCLEVBQUdSLEVBQWtCSyxPQUFTLEdBQ2pFQyxHQUFRLElBQUFFLHVCQUFzQixFQUFHekIsS0FBS29CLE9BQU9FLE9BQVMsR0FFNUQsR0FBSXRCLEtBQUtvQixPQUFPSSxHQUFZRCxHQUFRLENBQ2xDLElBQU1HLEVBQVExQixLQUFLb0IsT0FBT0ksR0FBWUQsR0FJdEMsY0FGT3ZCLEtBQUtvQixPQUFPSSxHQUFZRCxHQUV4QkcsQyxDQUdULE9BQU8xQixLQUFLWSxnQkFDZCxFQUNGLEVBcENBLEdBQWEsRUFBQVAsaUJBQUFBLEMsOEVDYkEsRUFBQU0sTUFDWCxTQUFxQmUsR0FBQSxLQUFBQSxNQUFBQSxDQUFzQixDLDhFQ1FoQyxFQUFBQyxNQUtYLFNBQVlDLEdBQ1Y1QixLQUFLNkIsU0FBV0QsRUFBV0MsU0FDM0I3QixLQUFLMEIsTUFBUUUsRUFBV0YsTUFDeEIxQixLQUFLRCxLQUFPNkIsRUFBVzdCLElBQ3pCLEMsOEZDcEJXLEVBQUEwQixzQkFBd0IsU0FBQ0ssRUFBYUMsR0FDakQsT0FBQUMsS0FBS0MsTUFBTUQsS0FBS0UsVUFBWUgsRUFBTUQsRUFBTSxHQUFLQSxFQUE3QyxDLDhoQkNDRixhQUVNSyxFQUFvQixPQVUxQixhQVdFLFdBQVlQLEcsUUFDVjVCLEtBQUtvQyxjQUFnQlIsRUFBV1EsY0FDaENwQyxLQUFLcUMsVUFBWVQsRUFBV1MsVUFDNUJyQyxLQUFLRyxTQUFXeUIsRUFBV3pCLFNBQzNCSCxLQUFLc0MsTUFBeUIsUUFBakIsRUFBQVYsYUFBVSxFQUFWQSxFQUFZVSxhQUFLLFFBQUksSUFDbEN0QyxLQUFLdUMsT0FBMkIsUUFBbEIsRUFBQVgsYUFBVSxFQUFWQSxFQUFZVyxjQUFNLFFBQUksSUFFcEN2QyxLQUFLd0MsT0FBUyxJQUFJQyxJQUNsQnpDLEtBQUswQyxXQUFhLElBQUlELEdBQ3hCLENBeUtGLE9BdktTLFlBQUFFLEtBQVAsV0FDRTNDLEtBQUs0QyxZQUVMNUMsS0FBSzZDLFlBQ1AsRUFFUSxZQUFBRCxVQUFSLFdBQ0U1QyxLQUFLcUMsVUFBVVMsYUFBYSxRQUFTLFVBQUc5QyxLQUFLc0MsTUFBSyxPQUNsRHRDLEtBQUtxQyxVQUFVUyxhQUFhLFNBQVUsVUFBRzlDLEtBQUt1QyxPQUFNLE9BRXBEdkMsS0FBS3FDLFVBQVVVLE1BQU1DLGdCQUFrQixNQUN6QyxFQUVRLFlBQUFILFdBQVIsV0FLRSxJQUpBLElBQU1JLEVBQVlqRCxLQUFLa0QsZUFDakJDLEVBQWNuQixLQUFLb0IsS0FBS3BELEtBQUt1QyxPQUFTVSxHQUN0Q0ksRUFBZ0JyQixLQUFLb0IsS0FBS3BELEtBQUtzQyxNQUFRVyxHQUVwQ0ssRUFBTyxFQUFHQSxFQUFPSCxFQUFhRyxJQUNyQyxJQUFLLElBQUlDLEVBQVMsRUFBR0EsRUFBU0YsRUFBZUUsSUFDM0N2RCxLQUFLd0QsWUFDSCxJQUFJLEVBQUE3QixNQUFNLENBQ1JFLFNBQVUsQ0FBRTRCLEVBQUdGLEVBQVFHLEVBQUdKLEdBQzFCNUIsTUFBT1MsRUFDUHBDLEtBQU1rRCxJQUtoQixFQUVRLFlBQUFDLGFBQVIsV0FDRSxJQUFNUyxFQUFtQjNCLEtBQUtvQixLQUFLcEQsS0FBS3NDLE1BQVF0QyxLQUFLdUMsUUFDL0NxQixFQUNINUQsS0FBS0csU0FBV0gsS0FBS0csU0FBVyxFQUFLd0QsRUFDbENFLEVBQWdCN0QsS0FBS0csU0FBV0gsS0FBS0csU0FBVyxFQUFLd0QsRUFFckRHLEVBQVM5RCxLQUFLc0MsTUFBUXNCLEVBQWlCNUQsS0FBS3VDLE9BQVNzQixFQUUzRCxPQUFPN0IsS0FBS0MsTUFDVjZCLElBQVcsRUFBSTlELEtBQUtzQyxNQUFRc0IsRUFBaUI1RCxLQUFLdUMsT0FBU3NCLEVBRS9ELEVBRVEsWUFBQUwsWUFBUixTQUFvQk8sR0FDbEIvRCxLQUFLd0MsT0FBT3dCLElBQUksVUFBR0QsRUFBTWxDLFNBQVM0QixFQUFDLFlBQUlNLEVBQU1sQyxTQUFTNkIsR0FBS0ssR0FFM0QvRCxLQUFLaUUsWUFBWUYsRUFDbkIsRUFFUSxZQUFBRSxZQUFSLFNBQW9CRixHQUNsQixJQUFNRyxFQUFLSCxFQUFNaEUsS0FBT2dFLEVBQU1sQyxTQUFTNEIsRUFDakNVLEVBQUtKLEVBQU1oRSxLQUFPZ0UsRUFBTWxDLFNBQVM2QixFQUV2QzFELEtBQUtvQyxjQUFjZ0MsVUFBVUYsRUFBSUMsRUFBSUosRUFBTWhFLEtBQU1nRSxFQUFNaEUsTUFFdkRDLEtBQUtvQyxjQUFjaUMsVUFBWSxFQUMvQnJFLEtBQUtvQyxjQUFja0MsWUFBY25DLEVBQ2pDbkMsS0FBS29DLGNBQWNtQyxXQUFXTCxFQUFJQyxFQUFJSixFQUFNaEUsS0FBTWdFLEVBQU1oRSxNQUVwRGdFLEVBQU1yQyxRQUFVUyxJQUNsQm5DLEtBQUtvQyxjQUFjb0MsVUFBWVQsRUFBTXJDLE1BQ3JDMUIsS0FBS29DLGNBQWNxQyxTQUNqQlAsRUFBSyxFQUNMQyxFQUFLLEVBQ0xKLEVBQU1oRSxLQUFPLEVBQ2JnRSxFQUFNaEUsS0FBTyxHQUduQixFQUVPLFlBQUEyRSxXQUFQLFNBQWtCQyxHQUFsQixXQUNRMUUsRUFBUSxFQUFILEdBQU8wRSxFQUFLMUUsT0FBSyxHQUU1QkQsS0FBSzRFLFdBQ0gsQ0FDRUMsaUJBQWtCN0UsS0FBS0csU0FDdkIyRSxZQUFhLFNBQUN4QixHQUFpQixPQUFBQSxFQUF1QixFQUFoQixFQUFLbkQsUUFBWixFQUMvQjRFLG1CQUFvQixFQUNwQkMsY0FBZSxTQUFDekIsR0FBbUIsT0FBQUEsRUFBUyxFQUFLcEQsUUFBZCxHQUVyQ0YsRUFBTSxJQUdSRCxLQUFLNEUsV0FDSCxDQUNFQyxpQkFBa0I3RSxLQUFLRyxTQUN2QjJFLFlBQWEsU0FBQ3hCLEdBQWlCLE9BQUFBLEVBQXVCLEVBQWhCLEVBQUtuRCxRQUFaLEVBQy9CNEUsbUJBQW9CL0UsS0FBS0csU0FDekI2RSxjQUFlLFNBQUN6QixHQUFtQixPQUFBQSxFQUF5QixFQUFoQixFQUFLcEQsUUFBZCxHQUVyQ0YsRUFBTSxJQUVSRCxLQUFLNEUsV0FDSCxDQUNFQyxpQkFBa0I3RSxLQUFLRyxTQUN2QjJFLFlBQWEsU0FBQ3hCLEdBQWlCLE9BQUFBLEVBQXVCLEVBQWhCLEVBQUtuRCxRQUFaLEVBQy9CNEUsbUJBQW9DLEVBQWhCL0UsS0FBS0csU0FDekI2RSxjQUFlLFNBQUN6QixHQUFtQixPQUFBQSxFQUF5QixFQUFoQixFQUFLcEQsUUFBZCxHQUVyQ0YsRUFBTSxJQUVSRCxLQUFLNEUsV0FDSCxDQUNFQyxpQkFBa0I3RSxLQUFLRyxTQUN2QjJFLFlBQWEsU0FBQ3hCLEdBQWlCLE9BQUFBLEVBQXVCLEVBQWhCLEVBQUtuRCxRQUFaLEVBQy9CNEUsbUJBQW9DLEVBQWhCL0UsS0FBS0csU0FDekI2RSxjQUFlLFNBQUN6QixHQUFtQixPQUFBQSxFQUF5QixFQUFoQixFQUFLcEQsUUFBZCxHQUVyQ0YsRUFBTSxJQUVSRCxLQUFLNEUsV0FDSCxDQUNFQyxpQkFBa0IsRUFDbEJDLFlBQWEsU0FBQ3hCLEdBQWlCLE9BQUFBLEVBQU8sRUFBS25ELFFBQVosRUFDL0I0RSxtQkFBb0IvRSxLQUFLRyxTQUN6QjZFLGNBQWUsU0FBQ3pCLEdBQW1CLE9BQUFBLEVBQXlCLEVBQWhCLEVBQUtwRCxRQUFkLEdBRXJDRixFQUFNLElBRVJELEtBQUs0RSxXQUNILENBQ0VDLGlCQUFrQyxFQUFoQjdFLEtBQUtHLFNBQ3ZCMkUsWUFBYSxTQUFDeEIsR0FBaUIsT0FBQUEsRUFBdUIsRUFBaEIsRUFBS25ELFFBQVosRUFDL0I0RSxtQkFBb0IvRSxLQUFLRyxTQUN6QjZFLGNBQWUsU0FBQ3pCLEdBQW1CLE9BQUFBLEVBQXlCLEVBQWhCLEVBQUtwRCxRQUFkLEdBRXJDRixFQUFNLEdBRVYsRUFFUSxZQUFBMkUsV0FBUixTQUNFSyxFQU1BQyxHQU1BLElBSkEsSUFBSTVCLEVBQU8yQixFQUFnQkosaUJBQ3ZCdEIsRUFBUzBCLEVBQWdCRixtQkFDekJJLEVBQWEsRUFFVkEsRUFBYUQsRUFBTzVELFFBQVEsQ0FDakMsS0FBTzJELEVBQWdCSCxZQUFZeEIsSUFBTyxDQUN4QyxLQUFPMkIsRUFBZ0JELGNBQWN6QixJQUFTLENBQzVDLElBQU02QixFQUFlcEYsS0FBS3dDLE9BQU82QyxJQUFJLFVBQUc5QixFQUFNLFlBQUlELElBRWxEdEQsS0FBS3dELFlBQ0gsSUFBSSxFQUFBN0IsTUFBTSxFQUFELEtBQ0p5RCxHQUFhLENBQ2hCMUQsTUFBT3dELEVBQU9DLEdBQVl6RCxVQUk5QnlELElBQ0E1QixHLENBR0ZBLEVBQVMwQixFQUFnQkYsbUJBQ3pCekIsRyxDQUdGQSxFQUFPMkIsRUFBZ0JKLGdCLENBRTNCLEVBQ0YsRUE3TEEsR0FBYSxFQUFBUyxTQUFBQSxDLEdDYlRDLEVBQTJCLENBQUMsRUFHaEMsU0FBU0MsRUFBb0JDLEdBRTVCLElBQUlDLEVBQWVILEVBQXlCRSxHQUM1QyxRQUFxQi9FLElBQWpCZ0YsRUFDSCxPQUFPQSxFQUFhQyxRQUdyQixJQUFJQyxFQUFTTCxFQUF5QkUsR0FBWSxDQUdqREUsUUFBUyxDQUFDLEdBT1gsT0FIQUUsRUFBb0JKLEdBQVVLLEtBQUtGLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNILEdBR3BFSSxFQUFPRCxPQUNmLENQcEJBLFNBQ0EsU0FFQUksU0FBU0MsaUJBQWlCLG9CQUFvQixXQUM1QyxJQUFNQyxFQUFVRixTQUFTRyxlQUFlLFFBQ2xDQyxFQUFNRixFQUFRRyxXQUFXLE1BRS9CLEdBQVksT0FBUkQsRUFDRixNQUFNLElBQUlFLE1BQU0sd0JBTWxCLElBRU1DLEVBQVcsSUFBSSxFQUFBaEIsU0FBUyxDQUM1QmxELGNBQWUrRCxFQUNmOUQsVUFBVzRELEVBQ1g5RixTQUxlLElBUVh3RSxFQUFPLElBQUksRUFBQTVELEtBUkEsR0FVakI0RCxFQUFLekUsYUFFTG9HLEVBQVMzRCxPQUVUckMsUUFBUUMsSUFBSSxTQUFVLENBQUVvRSxLQUFJLElBRTVCckUsUUFBUUMsSUFBSSxZQUFhLENBQUVnRyxRQUFTRCxJQUVwQ0EsRUFBUzVCLFdBQVdDLEVBR3RCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yZXNvbHZlZG9yLWN1Ym8tbWFnaWNvLy4vc3JjL21haW4udHMiLCJ3ZWJwYWNrOi8vcmVzb2x2ZWRvci1jdWJvLW1hZ2ljby8uL3NyYy9jdWJlLnRzIiwid2VicGFjazovL3Jlc29sdmVkb3ItY3Viby1tYWdpY28vLi9zcmMvZmFjZXQtY29sb3JzLnRzIiwid2VicGFjazovL3Jlc29sdmVkb3ItY3Viby1tYWdpY28vLi9zcmMvZmFjZXQudHMiLCJ3ZWJwYWNrOi8vcmVzb2x2ZWRvci1jdWJvLW1hZ2ljby8uL3NyYy9waXhlbC50cyIsIndlYnBhY2s6Ly9yZXNvbHZlZG9yLWN1Ym8tbWFnaWNvLy4vc3JjL3V0bHMudHMiLCJ3ZWJwYWNrOi8vcmVzb2x2ZWRvci1jdWJvLW1hZ2ljby8uL3NyYy92aWV3cG9ydC50cyIsIndlYnBhY2s6Ly9yZXNvbHZlZG9yLWN1Ym8tbWFnaWNvL3dlYnBhY2svYm9vdHN0cmFwIl0sInNvdXJjZXNDb250ZW50IjpbIi8vaW1wb3J0IHsgbWFpbkV4YW1wbGVDdWJlRGVtbyB9IGZyb20gXCIuL2V4YW1wbGUtY3ViZS93ZWJnbC1kZW1vXCI7XG5cbmltcG9ydCB7IEN1YmUgfSBmcm9tIFwiLi9jdWJlXCI7XG5pbXBvcnQgeyBWaWV3cG9ydCB9IGZyb20gXCIuL3ZpZXdwb3J0XCI7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcbiAgY29uc3QgZG9tTWFpbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFpblwiKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcbiAgY29uc3QgY3R4ID0gZG9tTWFpbi5nZXRDb250ZXh0KFwiMmRcIik7XG5cbiAgaWYgKGN0eCA9PT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkNhbnZhcyBuw6NvIGVuY290cmFkb1wiKTtcbiAgfVxuXG4gIC8vIGNvbnN0IGN1YmVTaXplID0gcGFyc2VJbnQoXG4gIC8vICAgcHJvbXB0KFwiSW5mb3JtZSBvIHRhbWFuaG8gZG8gY3VibyAoZXguOiAyKTogXCIpID8/IFwiMlwiXG4gIC8vICk7XG4gIGNvbnN0IGN1YmVTaXplID0gMjtcblxuICBjb25zdCB2aWV3cG9ydCA9IG5ldyBWaWV3cG9ydCh7XG4gICAgY2FudmFzQ29udGV4dDogY3R4LFxuICAgIGNhbnZhc0RPTTogZG9tTWFpbixcbiAgICBjdWJlU2l6ZSxcbiAgfSk7XG5cbiAgY29uc3QgY3ViZSA9IG5ldyBDdWJlKGN1YmVTaXplKTtcblxuICBjdWJlLmluaXRSYW5kb20oKTtcblxuICB2aWV3cG9ydC5pbml0KCk7XG5cbiAgY29uc29sZS5sb2coXCItLWN1YmVcIiwgeyBjdWJlIH0pO1xuXG4gIGNvbnNvbGUubG9nKFwiLS12aXdwb3J0XCIsIHsgdml3cG9ydDogdmlld3BvcnQgfSk7XG5cbiAgdmlld3BvcnQucmVuZGVyQ3ViZShjdWJlKTtcblxuICAvL21haW5FeGFtcGxlQ3ViZURlbW8oY3R4KTtcbn0pO1xuXG5jb25zdCByZW5kZXJDdWJlID0gKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBjdWJlOiBDdWJlKSA9PiB7fTtcbiIsIi8qKlxuICogRWxlbWVudG9zIGRvIGN1Ym9cbiAqXG4gKiAtIDYgZmFjZXNcbiAqIC0gNTIgZmFjZXRzXG4gKlxuICogLSBxdWFuZG8gdW1hIGxpbmhhL2NvbHVuYSBzZSBtb3ZpbWVudGEgbW92aW1lbnRhIHRvZG9zIG9zIGVsZW1lbnRvc1xuICogICBkZWxhIHBhcmEgbyBzZW50aWRvIGRvIG1vdmltZW50b1xuICpcbiAqIC0gcXVhbmRvIHRvZG9zIGFzIGZhY2VzIHRlbSBhIG1lc21hIGNvciBvIGN1Ym8gZXN0YSBjb21wbGV0b1xuICpcbiAqL1xuXG5pbXBvcnQgeyBGYWNldCB9IGZyb20gXCIuL2ZhY2V0XCI7XG5pbXBvcnQgeyBGYWNldENvbG9yUGlja2VyIH0gZnJvbSBcIi4vZmFjZXQtY29sb3JzXCI7XG5cbmV4cG9ydCB0eXBlIE51bWJlckZhY2VzID0gMSB8IDIgfCAzIHwgNCB8IDUgfCA2O1xuXG5pbnRlcmZhY2UgQ3ViZU1vdmVtZW50IHtcbiAgZmFjZTogTnVtYmVyRmFjZXM7XG4gIGRpcmVjdGlvbjogXCJMRUZUXCIgfCBcIlJJR0hUXCI7XG59XG5cbnR5cGUgRmFjZSA9IEZhY2V0W107XG5cbmV4cG9ydCBjbGFzcyBDdWJlIHtcbiAgLy8gcmVhZG9ubHkgY3VycmVudEZhY2UgPSAxO1xuXG4gIHJlYWRvbmx5IGZhY2VzOiBGYWNlW107XG5cbiAgcmVhZG9ubHkgc2l6ZTogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKHNpemU6IG51bWJlcikge1xuICAgIHRoaXMuZmFjZXMgPSBbXTtcbiAgICB0aGlzLnNpemUgPSBzaXplO1xuICB9XG5cbiAgcHVibGljIGluaXRSYW5kb20oKSB7XG4gICAgY29uc3QgY3ViZVNpemUgPSB0aGlzLnNpemUgKiB0aGlzLnNpemU7XG5cbiAgICBjb25zdCBjb2xvclBpY2tlciA9IG5ldyBGYWNldENvbG9yUGlja2VyKGN1YmVTaXplKTtcblxuICAgIGNvbnNvbGUubG9nKFwiLS0taW5pdFJhbmRvbVwiLCB7IHNpemU6IHRoaXMuc2l6ZSwgY3ViZVNpemUsIGNvbG9yUGlja2VyIH0pO1xuXG4gICAgZm9yIChsZXQgZmFjZUluZGV4ID0gMTsgZmFjZUluZGV4IDw9IDY7IGZhY2VJbmRleCsrKSB7XG4gICAgICBmb3IgKGxldCBmYWNldEluZGV4ID0gMDsgZmFjZXRJbmRleCA8IGN1YmVTaXplOyBmYWNldEluZGV4KyspIHtcbiAgICAgICAgaWYgKHRoaXMuZmFjZXNbZmFjZUluZGV4XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdGhpcy5mYWNlc1tmYWNlSW5kZXhdID0gW107XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmZhY2VzW2ZhY2VJbmRleF1bZmFjZXRJbmRleF0gPSBuZXcgRmFjZXQoXG4gICAgICAgICAgY29sb3JQaWNrZXIucG9wUmFuZG9tQ29sb3IoKVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIG1vdmUobW92ZW1lbnQ6IEN1YmVNb3ZlbWVudCkge31cbn1cbiIsImltcG9ydCB7IHJhbmRvbUludEZyb21JbnRlcnZhbCB9IGZyb20gXCIuL3V0bHNcIjtcblxuZXhwb3J0IGVudW0gRkFDRVRfQ09MT1JTIHtcbiAgUkVEID0gXCIjRjQ0MzM2XCIsXG4gIEdSRUVOID0gXCIjNENBRjUwXCIsXG4gIEJMVUUgPSBcIiMwM0E5RjRcIixcbiAgWUVMTE9XID0gXCIjRkZFQjNCXCIsXG4gIE9SQU5HRSA9IFwiI0ZCOEMwMFwiLFxuICBHUkVZID0gXCIjNzk1NTQ4XCIsXG59XG5cbmNvbnN0IEZBQ0VUX0NPTE9SU19LRVlTID0gT2JqZWN0LmtleXMoRkFDRVRfQ09MT1JTKTtcblxudHlwZSBGYWNldENvbG9yc0tleXNUeXBlID0ga2V5b2YgdHlwZW9mIEZBQ0VUX0NPTE9SUztcblxuZXhwb3J0IGNsYXNzIEZhY2V0Q29sb3JQaWNrZXIge1xuICByZWFkb25seSBjb2xvcnM6IEZBQ0VUX0NPTE9SU1tdW107XG5cbiAgY29uc3RydWN0b3IocmVhZG9ubHkgc2l6ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5jb2xvcnMgPSBbXTtcblxuICAgIGZvciAoXG4gICAgICBsZXQgY29sb3JJbmRleCA9IDA7XG4gICAgICBjb2xvckluZGV4IDwgRkFDRVRfQ09MT1JTX0tFWVMubGVuZ3RoO1xuICAgICAgY29sb3JJbmRleCsrXG4gICAgKSB7XG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgc2l6ZTsgaW5kZXgrKykge1xuICAgICAgICBpZiAodGhpcy5jb2xvcnNbY29sb3JJbmRleF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRoaXMuY29sb3JzW2NvbG9ySW5kZXhdID0gW107XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNvbG9yc1tjb2xvckluZGV4XVtpbmRleF0gPVxuICAgICAgICAgIEZBQ0VUX0NPTE9SU1tGQUNFVF9DT0xPUlNfS0VZU1tjb2xvckluZGV4XSBhcyBGYWNldENvbG9yc0tleXNUeXBlXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwb3BSYW5kb21Db2xvcigpOiBGQUNFVF9DT0xPUlMge1xuICAgIGNvbnN0IGluZGV4Q29sb3IgPSByYW5kb21JbnRGcm9tSW50ZXJ2YWwoMCwgRkFDRVRfQ09MT1JTX0tFWVMubGVuZ3RoIC0gMSk7XG4gICAgY29uc3QgaW5kZXggPSByYW5kb21JbnRGcm9tSW50ZXJ2YWwoMCwgdGhpcy5jb2xvcnMubGVuZ3RoIC0gMSk7XG5cbiAgICBpZiAodGhpcy5jb2xvcnNbaW5kZXhDb2xvcl1baW5kZXhdKSB7XG4gICAgICBjb25zdCBjb2xvciA9IHRoaXMuY29sb3JzW2luZGV4Q29sb3JdW2luZGV4XTtcblxuICAgICAgZGVsZXRlIHRoaXMuY29sb3JzW2luZGV4Q29sb3JdW2luZGV4XTtcblxuICAgICAgcmV0dXJuIGNvbG9yO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnBvcFJhbmRvbUNvbG9yKCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IEZBQ0VUX0NPTE9SUyB9IGZyb20gXCIuL2ZhY2V0LWNvbG9yc1wiO1xuXG5leHBvcnQgY2xhc3MgRmFjZXQge1xuICBjb25zdHJ1Y3RvcihyZWFkb25seSBjb2xvcjogRkFDRVRfQ09MT1JTKSB7fVxufVxuIiwiaW50ZXJmYWNlIFBpeGVsUG9zaXRpb24ge1xuICByZWFkb25seSB4OiBudW1iZXI7XG4gIHJlYWRvbmx5IHk6IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIFBpeGVsQXR0cmlidXRlcyB7XG4gIHJlYWRvbmx5IHBvc2l0aW9uOiBQaXhlbFBvc2l0aW9uO1xuICByZWFkb25seSBjb2xvcjogc3RyaW5nO1xuICByZWFkb25seSBzaXplOiBudW1iZXI7XG59XG5cbmV4cG9ydCBjbGFzcyBQaXhlbCBpbXBsZW1lbnRzIFBpeGVsQXR0cmlidXRlcyB7XG4gIHJlYWRvbmx5IHBvc2l0aW9uOiBQaXhlbFBvc2l0aW9uO1xuICByZWFkb25seSBjb2xvcjogc3RyaW5nO1xuICByZWFkb25seSBzaXplOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IoYXR0cmlidXRlczogUGl4ZWxBdHRyaWJ1dGVzKSB7XG4gICAgdGhpcy5wb3NpdGlvbiA9IGF0dHJpYnV0ZXMucG9zaXRpb247XG4gICAgdGhpcy5jb2xvciA9IGF0dHJpYnV0ZXMuY29sb3I7XG4gICAgdGhpcy5zaXplID0gYXR0cmlidXRlcy5zaXplO1xuICB9XG59XG4iLCJleHBvcnQgY29uc3QgcmFuZG9tSW50RnJvbUludGVydmFsID0gKG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcikgPT5cbiAgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpICsgbWluKTtcbiIsImltcG9ydCB7IEN1YmUsIE51bWJlckZhY2VzIH0gZnJvbSBcIi4vY3ViZVwiO1xyXG5pbXBvcnQgeyBGYWNldCB9IGZyb20gXCIuL2ZhY2V0XCI7XHJcbmltcG9ydCB7IFBpeGVsIH0gZnJvbSBcIi4vcGl4ZWxcIjtcclxuXHJcbmNvbnN0IEVNUFRZX1BJWEVMX0NPTE9SID0gXCIjY2NjXCI7XHJcblxyXG5pbnRlcmZhY2UgVmlld3BvcnRBdHRyaWJ1dGVzIHtcclxuICByZWFkb25seSBjYW52YXNDb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcbiAgcmVhZG9ubHkgY2FudmFzRE9NOiBIVE1MQ2FudmFzRWxlbWVudDtcclxuICByZWFkb25seSBjdWJlU2l6ZTogbnVtYmVyO1xyXG4gIHJlYWRvbmx5IHdpZHRoPzogbnVtYmVyO1xyXG4gIHJlYWRvbmx5IGhlaWdodD86IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFZpZXdwb3J0IHtcclxuICBwcml2YXRlIGNhbnZhc0NvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuICBwcml2YXRlIGNhbnZhc0RPTTogSFRNTENhbnZhc0VsZW1lbnQ7XHJcbiAgcmVhZG9ubHkgY3ViZVNpemU6IG51bWJlcjtcclxuICBwcml2YXRlIHdpZHRoOiBudW1iZXI7XHJcbiAgcHJpdmF0ZSBoZWlnaHQ6IG51bWJlcjtcclxuXHJcbiAgcHJpdmF0ZSBwaXhlbHM6IE1hcDxzdHJpbmcsIFBpeGVsPjtcclxuXHJcbiAgcHJpdmF0ZSBjdWJlUGl4ZWxzOiBNYXA8TnVtYmVyRmFjZXMsIFBpeGVsW10+O1xyXG5cclxuICBjb25zdHJ1Y3RvcihhdHRyaWJ1dGVzOiBWaWV3cG9ydEF0dHJpYnV0ZXMpIHtcclxuICAgIHRoaXMuY2FudmFzQ29udGV4dCA9IGF0dHJpYnV0ZXMuY2FudmFzQ29udGV4dDtcclxuICAgIHRoaXMuY2FudmFzRE9NID0gYXR0cmlidXRlcy5jYW52YXNET007XHJcbiAgICB0aGlzLmN1YmVTaXplID0gYXR0cmlidXRlcy5jdWJlU2l6ZTtcclxuICAgIHRoaXMud2lkdGggPSBhdHRyaWJ1dGVzPy53aWR0aCA/PyA2NDA7XHJcbiAgICB0aGlzLmhlaWdodCA9IGF0dHJpYnV0ZXM/LmhlaWdodCA/PyA0ODA7XHJcblxyXG4gICAgdGhpcy5waXhlbHMgPSBuZXcgTWFwKCk7XHJcbiAgICB0aGlzLmN1YmVQaXhlbHMgPSBuZXcgTWFwKCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgaW5pdCgpIHtcclxuICAgIHRoaXMuaW5pdFN0eWxlKCk7XHJcblxyXG4gICAgdGhpcy5pbml0UGl4ZWxzKCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGluaXRTdHlsZSgpIHtcclxuICAgIHRoaXMuY2FudmFzRE9NLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsIGAke3RoaXMud2lkdGh9cHhgKTtcclxuICAgIHRoaXMuY2FudmFzRE9NLnNldEF0dHJpYnV0ZShcImhlaWdodFwiLCBgJHt0aGlzLmhlaWdodH1weGApO1xyXG5cclxuICAgIHRoaXMuY2FudmFzRE9NLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiIzMzM1wiO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBpbml0UGl4ZWxzKCkge1xyXG4gICAgY29uc3QgcGl4ZWxTaXplID0gdGhpcy5nZXRQaXhlbFNpemUoKTtcclxuICAgIGNvbnN0IG51bWJlckxpbmVzID0gTWF0aC5jZWlsKHRoaXMuaGVpZ2h0IC8gcGl4ZWxTaXplKTtcclxuICAgIGNvbnN0IG51bWJlckNvbHVtbnMgPSBNYXRoLmNlaWwodGhpcy53aWR0aCAvIHBpeGVsU2l6ZSk7XHJcblxyXG4gICAgZm9yIChsZXQgbGluZSA9IDA7IGxpbmUgPCBudW1iZXJMaW5lczsgbGluZSsrKSB7XHJcbiAgICAgIGZvciAobGV0IGNvbHVtbiA9IDA7IGNvbHVtbiA8IG51bWJlckNvbHVtbnM7IGNvbHVtbisrKSB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVQaXhlbChcclxuICAgICAgICAgIG5ldyBQaXhlbCh7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiB7IHg6IGNvbHVtbiwgeTogbGluZSB9LFxyXG4gICAgICAgICAgICBjb2xvcjogRU1QVFlfUElYRUxfQ09MT1IsXHJcbiAgICAgICAgICAgIHNpemU6IHBpeGVsU2l6ZSxcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRQaXhlbFNpemUoKSB7XHJcbiAgICBjb25zdCBwaXhlbFNlaXplRmFjdG9yID0gTWF0aC5jZWlsKHRoaXMud2lkdGggLyB0aGlzLmhlaWdodCk7XHJcbiAgICBjb25zdCBtaW5DdWJlQ29sdW1ucyA9XHJcbiAgICAgICh0aGlzLmN1YmVTaXplICogdGhpcy5jdWJlU2l6ZSAqIDQpIC8gcGl4ZWxTZWl6ZUZhY3RvcjtcclxuICAgIGNvbnN0IG1pbkN1YmVMaW5lcyA9ICh0aGlzLmN1YmVTaXplICogdGhpcy5jdWJlU2l6ZSAqIDMpIC8gcGl4ZWxTZWl6ZUZhY3RvcjtcclxuXHJcbiAgICBjb25zdCByZXN1bHQgPSB0aGlzLndpZHRoIC8gbWluQ3ViZUNvbHVtbnMgLSB0aGlzLmhlaWdodCAvIG1pbkN1YmVMaW5lcztcclxuXHJcbiAgICByZXR1cm4gTWF0aC5mbG9vcihcclxuICAgICAgcmVzdWx0IDw9IC0xID8gdGhpcy53aWR0aCAvIG1pbkN1YmVDb2x1bW5zIDogdGhpcy5oZWlnaHQgLyBtaW5DdWJlTGluZXNcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHVwZGF0ZVBpeGVsKHBpeGVsOiBQaXhlbCkge1xyXG4gICAgdGhpcy5waXhlbHMuc2V0KGAke3BpeGVsLnBvc2l0aW9uLnh9LSR7cGl4ZWwucG9zaXRpb24ueX1gLCBwaXhlbCk7XHJcblxyXG4gICAgdGhpcy5yZW5kZXJQaXhlbChwaXhlbCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHJlbmRlclBpeGVsKHBpeGVsOiBQaXhlbCkge1xyXG4gICAgY29uc3QgX3ggPSBwaXhlbC5zaXplICogcGl4ZWwucG9zaXRpb24ueDtcclxuICAgIGNvbnN0IF95ID0gcGl4ZWwuc2l6ZSAqIHBpeGVsLnBvc2l0aW9uLnk7XHJcblxyXG4gICAgdGhpcy5jYW52YXNDb250ZXh0LmNsZWFyUmVjdChfeCwgX3ksIHBpeGVsLnNpemUsIHBpeGVsLnNpemUpO1xyXG5cclxuICAgIHRoaXMuY2FudmFzQ29udGV4dC5saW5lV2lkdGggPSAyO1xyXG4gICAgdGhpcy5jYW52YXNDb250ZXh0LnN0cm9rZVN0eWxlID0gRU1QVFlfUElYRUxfQ09MT1I7XHJcbiAgICB0aGlzLmNhbnZhc0NvbnRleHQuc3Ryb2tlUmVjdChfeCwgX3ksIHBpeGVsLnNpemUsIHBpeGVsLnNpemUpO1xyXG5cclxuICAgIGlmIChwaXhlbC5jb2xvciAhPT0gRU1QVFlfUElYRUxfQ09MT1IpIHtcclxuICAgICAgdGhpcy5jYW52YXNDb250ZXh0LmZpbGxTdHlsZSA9IHBpeGVsLmNvbG9yO1xyXG4gICAgICB0aGlzLmNhbnZhc0NvbnRleHQuZmlsbFJlY3QoXHJcbiAgICAgICAgX3ggKyAxLFxyXG4gICAgICAgIF95ICsgMSxcclxuICAgICAgICBwaXhlbC5zaXplIC0gMixcclxuICAgICAgICBwaXhlbC5zaXplIC0gMlxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHJlbmRlckN1YmUoY3ViZTogQ3ViZSkge1xyXG4gICAgY29uc3QgZmFjZXMgPSBbLi4uY3ViZS5mYWNlc107XHJcblxyXG4gICAgdGhpcy5yZW5kZXJGYWNlKFxyXG4gICAgICB7XHJcbiAgICAgICAgbGluZUluaXRpYWxWYWx1ZTogdGhpcy5jdWJlU2l6ZSxcclxuICAgICAgICBsaW5lSXNWYWxpZDogKGxpbmU6IG51bWJlcikgPT4gbGluZSA8IHRoaXMuY3ViZVNpemUgKiAyLFxyXG4gICAgICAgIGNvbHVtbkluaXRpYWxWYWx1ZTogMCxcclxuICAgICAgICBjb2x1bW5Jc1ZhbGlkOiAoY29sdW1uOiBudW1iZXIpID0+IGNvbHVtbiA8IHRoaXMuY3ViZVNpemUsXHJcbiAgICAgIH0sXHJcbiAgICAgIGZhY2VzWzFdXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMucmVuZGVyRmFjZShcclxuICAgICAge1xyXG4gICAgICAgIGxpbmVJbml0aWFsVmFsdWU6IHRoaXMuY3ViZVNpemUsXHJcbiAgICAgICAgbGluZUlzVmFsaWQ6IChsaW5lOiBudW1iZXIpID0+IGxpbmUgPCB0aGlzLmN1YmVTaXplICogMixcclxuICAgICAgICBjb2x1bW5Jbml0aWFsVmFsdWU6IHRoaXMuY3ViZVNpemUsXHJcbiAgICAgICAgY29sdW1uSXNWYWxpZDogKGNvbHVtbjogbnVtYmVyKSA9PiBjb2x1bW4gPCB0aGlzLmN1YmVTaXplICogMixcclxuICAgICAgfSxcclxuICAgICAgZmFjZXNbMl1cclxuICAgICk7XHJcbiAgICB0aGlzLnJlbmRlckZhY2UoXHJcbiAgICAgIHtcclxuICAgICAgICBsaW5lSW5pdGlhbFZhbHVlOiB0aGlzLmN1YmVTaXplLFxyXG4gICAgICAgIGxpbmVJc1ZhbGlkOiAobGluZTogbnVtYmVyKSA9PiBsaW5lIDwgdGhpcy5jdWJlU2l6ZSAqIDIsXHJcbiAgICAgICAgY29sdW1uSW5pdGlhbFZhbHVlOiB0aGlzLmN1YmVTaXplICogMixcclxuICAgICAgICBjb2x1bW5Jc1ZhbGlkOiAoY29sdW1uOiBudW1iZXIpID0+IGNvbHVtbiA8IHRoaXMuY3ViZVNpemUgKiAzLFxyXG4gICAgICB9LFxyXG4gICAgICBmYWNlc1szXVxyXG4gICAgKTtcclxuICAgIHRoaXMucmVuZGVyRmFjZShcclxuICAgICAge1xyXG4gICAgICAgIGxpbmVJbml0aWFsVmFsdWU6IHRoaXMuY3ViZVNpemUsXHJcbiAgICAgICAgbGluZUlzVmFsaWQ6IChsaW5lOiBudW1iZXIpID0+IGxpbmUgPCB0aGlzLmN1YmVTaXplICogMixcclxuICAgICAgICBjb2x1bW5Jbml0aWFsVmFsdWU6IHRoaXMuY3ViZVNpemUgKiAzLFxyXG4gICAgICAgIGNvbHVtbklzVmFsaWQ6IChjb2x1bW46IG51bWJlcikgPT4gY29sdW1uIDwgdGhpcy5jdWJlU2l6ZSAqIDQsXHJcbiAgICAgIH0sXHJcbiAgICAgIGZhY2VzWzRdXHJcbiAgICApO1xyXG4gICAgdGhpcy5yZW5kZXJGYWNlKFxyXG4gICAgICB7XHJcbiAgICAgICAgbGluZUluaXRpYWxWYWx1ZTogMCxcclxuICAgICAgICBsaW5lSXNWYWxpZDogKGxpbmU6IG51bWJlcikgPT4gbGluZSA8IHRoaXMuY3ViZVNpemUsXHJcbiAgICAgICAgY29sdW1uSW5pdGlhbFZhbHVlOiB0aGlzLmN1YmVTaXplLFxyXG4gICAgICAgIGNvbHVtbklzVmFsaWQ6IChjb2x1bW46IG51bWJlcikgPT4gY29sdW1uIDwgdGhpcy5jdWJlU2l6ZSAqIDIsXHJcbiAgICAgIH0sXHJcbiAgICAgIGZhY2VzWzVdXHJcbiAgICApO1xyXG4gICAgdGhpcy5yZW5kZXJGYWNlKFxyXG4gICAgICB7XHJcbiAgICAgICAgbGluZUluaXRpYWxWYWx1ZTogdGhpcy5jdWJlU2l6ZSAqIDIsXHJcbiAgICAgICAgbGluZUlzVmFsaWQ6IChsaW5lOiBudW1iZXIpID0+IGxpbmUgPCB0aGlzLmN1YmVTaXplICogMyxcclxuICAgICAgICBjb2x1bW5Jbml0aWFsVmFsdWU6IHRoaXMuY3ViZVNpemUsXHJcbiAgICAgICAgY29sdW1uSXNWYWxpZDogKGNvbHVtbjogbnVtYmVyKSA9PiBjb2x1bW4gPCB0aGlzLmN1YmVTaXplICogMixcclxuICAgICAgfSxcclxuICAgICAgZmFjZXNbNl1cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHJlbmRlckZhY2UoXHJcbiAgICByZW5kZXJBcmd1bWVudHM6IHtcclxuICAgICAgbGluZUluaXRpYWxWYWx1ZTogbnVtYmVyO1xyXG4gICAgICBsaW5lSXNWYWxpZDogKGxpbmU6IG51bWJlcikgPT4gYm9vbGVhbjtcclxuICAgICAgY29sdW1uSW5pdGlhbFZhbHVlOiBudW1iZXI7XHJcbiAgICAgIGNvbHVtbklzVmFsaWQ6IChjb2x1bW46IG51bWJlcikgPT4gYm9vbGVhbjtcclxuICAgIH0sXHJcbiAgICBmYWNldHM6IEZhY2V0W11cclxuICApIHtcclxuICAgIGxldCBsaW5lID0gcmVuZGVyQXJndW1lbnRzLmxpbmVJbml0aWFsVmFsdWU7XHJcbiAgICBsZXQgY29sdW1uID0gcmVuZGVyQXJndW1lbnRzLmNvbHVtbkluaXRpYWxWYWx1ZTtcclxuICAgIGxldCBpbmRleEZhY2V0ID0gMDtcclxuXHJcbiAgICB3aGlsZSAoaW5kZXhGYWNldCA8IGZhY2V0cy5sZW5ndGgpIHtcclxuICAgICAgd2hpbGUgKHJlbmRlckFyZ3VtZW50cy5saW5lSXNWYWxpZChsaW5lKSkge1xyXG4gICAgICAgIHdoaWxlIChyZW5kZXJBcmd1bWVudHMuY29sdW1uSXNWYWxpZChjb2x1bW4pKSB7XHJcbiAgICAgICAgICBjb25zdCBjdXJyZW50UGl4ZWwgPSB0aGlzLnBpeGVscy5nZXQoYCR7Y29sdW1ufS0ke2xpbmV9YCk7XHJcblxyXG4gICAgICAgICAgdGhpcy51cGRhdGVQaXhlbChcclxuICAgICAgICAgICAgbmV3IFBpeGVsKHtcclxuICAgICAgICAgICAgICAuLi5jdXJyZW50UGl4ZWwhLFxyXG4gICAgICAgICAgICAgIGNvbG9yOiBmYWNldHNbaW5kZXhGYWNldF0uY29sb3IsXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgIGluZGV4RmFjZXQrKztcclxuICAgICAgICAgIGNvbHVtbisrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29sdW1uID0gcmVuZGVyQXJndW1lbnRzLmNvbHVtbkluaXRpYWxWYWx1ZTtcclxuICAgICAgICBsaW5lKys7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxpbmUgPSByZW5kZXJBcmd1bWVudHMubGluZUluaXRpYWxWYWx1ZTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiJdLCJuYW1lcyI6WyJzaXplIiwidGhpcyIsImZhY2VzIiwiaW5pdFJhbmRvbSIsImN1YmVTaXplIiwiY29sb3JQaWNrZXIiLCJGYWNldENvbG9yUGlja2VyIiwiY29uc29sZSIsImxvZyIsImZhY2VJbmRleCIsImZhY2V0SW5kZXgiLCJ1bmRlZmluZWQiLCJGYWNldCIsInBvcFJhbmRvbUNvbG9yIiwibW92ZSIsIm1vdmVtZW50IiwiQ3ViZSIsIkZBQ0VUX0NPTE9SUyIsIkZBQ0VUX0NPTE9SU19LRVlTIiwiT2JqZWN0Iiwia2V5cyIsImNvbG9ycyIsImNvbG9ySW5kZXgiLCJsZW5ndGgiLCJpbmRleCIsImluZGV4Q29sb3IiLCJyYW5kb21JbnRGcm9tSW50ZXJ2YWwiLCJjb2xvciIsIlBpeGVsIiwiYXR0cmlidXRlcyIsInBvc2l0aW9uIiwibWluIiwibWF4IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiRU1QVFlfUElYRUxfQ09MT1IiLCJjYW52YXNDb250ZXh0IiwiY2FudmFzRE9NIiwid2lkdGgiLCJoZWlnaHQiLCJwaXhlbHMiLCJNYXAiLCJjdWJlUGl4ZWxzIiwiaW5pdCIsImluaXRTdHlsZSIsImluaXRQaXhlbHMiLCJzZXRBdHRyaWJ1dGUiLCJzdHlsZSIsImJhY2tncm91bmRDb2xvciIsInBpeGVsU2l6ZSIsImdldFBpeGVsU2l6ZSIsIm51bWJlckxpbmVzIiwiY2VpbCIsIm51bWJlckNvbHVtbnMiLCJsaW5lIiwiY29sdW1uIiwidXBkYXRlUGl4ZWwiLCJ4IiwieSIsInBpeGVsU2VpemVGYWN0b3IiLCJtaW5DdWJlQ29sdW1ucyIsIm1pbkN1YmVMaW5lcyIsInJlc3VsdCIsInBpeGVsIiwic2V0IiwicmVuZGVyUGl4ZWwiLCJfeCIsIl95IiwiY2xlYXJSZWN0IiwibGluZVdpZHRoIiwic3Ryb2tlU3R5bGUiLCJzdHJva2VSZWN0IiwiZmlsbFN0eWxlIiwiZmlsbFJlY3QiLCJyZW5kZXJDdWJlIiwiY3ViZSIsInJlbmRlckZhY2UiLCJsaW5lSW5pdGlhbFZhbHVlIiwibGluZUlzVmFsaWQiLCJjb2x1bW5Jbml0aWFsVmFsdWUiLCJjb2x1bW5Jc1ZhbGlkIiwicmVuZGVyQXJndW1lbnRzIiwiZmFjZXRzIiwiaW5kZXhGYWNldCIsImN1cnJlbnRQaXhlbCIsImdldCIsIlZpZXdwb3J0IiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJjYWxsIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZG9tTWFpbiIsImdldEVsZW1lbnRCeUlkIiwiY3R4IiwiZ2V0Q29udGV4dCIsIkVycm9yIiwidmlld3BvcnQiLCJ2aXdwb3J0Il0sInNvdXJjZVJvb3QiOiIifQ==